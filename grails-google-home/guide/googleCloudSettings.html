<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>2 Google Cloud Settings</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/guide.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />            
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <div class="navTitle">
        
        Grails Framework Guide 
    </div>
    <div class="navLinks">
        <ul>
            <li>
                <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                    <a href="../guide/index.html" class="button">Table of contents</a>

                    <div id="nav-summary-childs" style="display:none;">
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/gettingStarted.html"><strong>1</strong><span>Getting Started</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/googleCloudSettings.html"><strong>2</strong><span>Google Cloud Settings</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/writingTheApp.html"><strong>3</strong><span>Writing the Application</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/test.html"><strong>4</strong><span>Test</span></a>
                        </div>
                        
                    </div>
                </div>
            </li>
        </ul>
    </div>


</div>

<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/gettingStarted.html">&lt;&lt; <strong>1</strong><span>Getting Started</span></a></div>
                

                
                    <div class="toc-item next-right"><a href="../guide/writingTheApp.html"><strong>3</strong><span>Writing the Application</span> >></a></div>
                


                
                <div id="table-of-content">
                    <h2>Table of Contents</h2>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#googleCloud"><strong>2.1</strong><span>Create a Google Cloud Project</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#gactionsCLI"><strong>2.2</strong><span>Install gactions CLI</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#googleActionsApi"><strong>2.3</strong><span>Configure Google Actions</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#appEngine"><strong>2.4</strong><span>Google App Engine</span></a>
                    </div>
                    
                </div>
                

                

<h1 id="googleCloudSettings">2 Google Cloud Settings</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-google-home/edit/master/src/main/docs/guide/googleCloudSettings.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This guide uses paid services; you may need to enable Billing in Google Cloud to complete some steps in this guide.
</td>
</tr>
</table>
</div>


<h2 id="googleCloud">2.1 Create a Google Cloud Project</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-google-home/edit/master/src/main/docs/guide/googleCloud.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Signup for <a href="https://console.cloud.google.com">Google Cloud Platform</a> and create a new project:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/createproject_1.png" alt="createproject 1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/createproject_2.png" alt="createproject 2">
</div>
</div>
<div class="paragraph">
<p>Install <a href="https://cloud.google.com/sdk/downloads">Cloud SDK</a> for your operating system.</p>
</div>
<div class="paragraph">
<p>After you have installed the SDK, run the init command in your terminal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ gcloud init</code></pre>
</div>
</div>
<div class="paragraph">
<p>It will prompt you to select the Google account and the project which you want to use.</p>
</div>


<h2 id="gactionsCLI">2.2 Install gactions CLI</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-google-home/edit/master/src/main/docs/guide/gactionsCLI.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>We will use <code>gactions CLI</code> to test our app.</p>
</div>
<div class="paragraph">
<p>Go to <a href="https://developers.google.com/actions/tools/gactions-cli">gactions CLI</a> and download it:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/gactions-cli.png" alt="gactions cli">
</div>
</div>
<div class="paragraph">
<p>Make the gactions binary executable (chmod +x on linux and OSX).</p>
</div>
<div class="paragraph">
<p>After you have installed gactions, run the init command in your terminal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ gactions init --force</code></pre>
</div>
</div>
<div class="paragraph">
<p>Other commands you can run: <code>preview</code>, <code>update</code>, <code>deploy</code>, <code>test</code>, and <code>list</code>.</p>
</div>


<h2 id="googleActionsApi">2.3 Configure Google Actions</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-google-home/edit/master/src/main/docs/guide/googleActionsApi.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="sect2">
<h3 id="_enable_google_actions_api">Enable Google Actions API</h3>
<div class="paragraph">
<p>Go to <a href="https://console.developers.google.com/apis/dashboard">Google API Manager Console</a> and
enable Google Actions API.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/enablegoogleactions.png" alt="enablegoogleactions">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_import_your_project_to_the_google_actions_console">Import your Project to the Google Actions Console</h3>
<div class="paragraph">
<p>Go to the new <a href="https://console.actions.google.com/">Google Actions Console</a> and import the project your previoulsy created:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/googleactionsconsole.png" alt="googleactionsconsole">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configure_your_project_id_in_code_action_json_code">Configure your project ID in <code>action.json</code></h3>
<div class="paragraph">
<p><code>action.json</code> is a metadata file which we use to inform the Google Cloud Actions Console about the
actions supported by our application.</p>
</div>
<div class="paragraph">
<p>Here you can also control:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>sample queries to help google understand which action to call</p>
</li>
<li>
<p>intent to call</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/main/resources/action.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">actions</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Default Welcome Intent</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">MAIN</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">fulfillment</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">conversationName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">color-finder-echo</span><span class="delimiter">&quot;</span></span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">intent</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">actions.intent.MAIN</span><span class="delimiter">&quot;</span></span>
      }

    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Deep link that finds brighter colors</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">color.intent</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">fulfillment</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">conversationName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">color.intent</span><span class="delimiter">&quot;</span></span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">intent</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">color.intent</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span>: [{
          <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">color</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">SchemaOrg_Color</span><span class="delimiter">&quot;</span></span>
        }],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">trigger</span><span class="delimiter">&quot;</span></span>: {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">queryPatterns</span><span class="delimiter">&quot;</span></span>: [
            <span class="string"><span class="delimiter">&quot;</span><span class="content">find a brighter color for $SchemaOrg_Color:color</span><span class="delimiter">&quot;</span></span>
          ]
        }
      }
    }
  ],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">conversations</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">color-finder-echo</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">color-finder-echo</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://grails-color-finder.appspot.com/assistantAction/index</span><span class="delimiter">&quot;</span></span>
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">color.intent</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">color.intent</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://grails-color-finder.appspot.com/assistantAction/color</span><span class="delimiter">&quot;</span></span>
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As shown above, our app supports two actions. We explain those actions with more detail in the next sections of this guide.</p>
</div>
<div class="paragraph">
<p>We will need to modify the httpExecution items to match your deployed application endpoints.</p>
</div>
<div class="listingblock">
<div class="title">src/main/resources/action.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><span class="key"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://PROJECT_ID.appspot.com/assistantAction/index</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_add_actions_to_your_assistant_app">Add Actions to your assistant app</h3>
<div class="paragraph">
<p>The first time you select a project in the Google Cloud Actions Console, you will need to supply the action package JSON via the <code>gactions</code> tool like so:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/useactionssdk.png" alt="useactionssdk">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">gactions update --action_package src/main/resources/action.json --project PROJECT_ID</code></pre>
</div>
</div>
<div class="paragraph">
<p>Follow the instructions prompted by the above command. It involves an authorization process.</p>
</div>
<div class="paragraph">
<p>At the end you will see an output similar to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">Your app for the Assistant for project PROJECT_ID was successfully updated with your actions. Visit the Actions on Google console to finish registering your app and submit it for review at https://console.actions.google.com/project/PROJECT_ID/overview</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_add_app_information">Add App Information</h3>
<div class="paragraph">
<p>After you actions package has been validated, you will be able to enter directory information such as images, privacy policy, and descriptions. Here you can also pick the voice of the speaker in your skill.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/appinfo.png" alt="appinfo">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/appinfo2.png" alt="appinfo2">
</div>
</div>
<div class="paragraph">
<p>The previous screenshots display two buttons. Test and Submit. We will click the <code>Test</code> in the previous screenshots once we have deployed our app to Google App Engine Flexible and we are ready to test our actions.</p>
</div>
</div>


<h2 id="appEngine">2.4 Google App Engine</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-google-home/edit/master/src/main/docs/guide/appEngine.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>We are going to deploy the Grails application developed in this guide to the <a href="https://cloud.google.com/appengine/docs/flexible/">Google App Engine Flexible Environment</a></p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>App Engine allows developers to focus on doing what they do best: writing code. Based on Google Compute Engine,
the App Engine flexible environment automatically scales your app up and down while balancing the load. Microservices,
authorization, SQL and NoSQL databases, traffic splitting, logging, versioning, security scanning, and content delivery networks are all supported natively.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Run the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ gcloud app create</code></pre>
</div>
</div>
<div class="paragraph">
<p>to initialize an App Engine application within the current Google Cloud project.</p>
</div>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/gettingStarted.html">&lt;&lt; <strong>1</strong><span>Getting Started</span></a></div>
                
                    <div class="toc-item next-right"><a href="../guide/writingTheApp.html"><strong>3</strong><span>Writing the Application</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title" style="text-align: right"><a href="https://travis-ci.org/grails-guides/grails-google-home"><img src="https://travis-ci.org/grails-guides/grails-google-home.svg?branch=master" /></a></div>            
                 <div class="local-title">
                    <a href="https://github.com/grails-guides/grails-google-home">
                    <svg height="35" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="35" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></a> &nbsp;&nbsp;Get the Code
                </div>
                <div class="menu">
                    <div class="input-group">                        
                        <button href="#" onclick="document.getElementById('github-url').value='git@github.com:grails-guides/grails-google-home.git'" class="codeButton">SSH</button>
                        <button onclick="document.getElementById('github-url').value='https://github.com/grails-guides/grails-google-home.git'" class="codeButton">HTTPS</button>
                        <button onclick="document.getElementById('github-url').value='https://github.com/grails-guides/grails-google-home'" class="codeButton">Subversion</button>
                    </div>
       
                    <div class="input-group">                    
                        <!-- Target -->
                        <input id="github-url" value="git@github.com:grails-guides/grails-google-home.git" type="text" />

                        <!-- Trigger -->
                        <button class="clipbtn" type="button" data-clipboard-target="#github-url">

                            <img width="13" src="../img/clippy.svg" alt="Copy to clipboard">
                        </button>       

                    </div>
                    <div class="input-group">
                      <a href="https://github.com/grails-guides/grails-google-home/archive/master.zip" class="downloadButton">Download ZIP</a>
                    </div>
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    Copies of this document may be made for your own use and for distribution to others, provided that you do not charge any fee for such copies and further provided that each copy contains this Copyright Notice, whether distributed in print or electronically. All guides are released with an ASLv2 license for the code, and Creative Commons license for the writing. 
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
