<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>5 Building the Client</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/guide.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />            
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <div class="navTitle">
        
        Grails Framework Guide 
    </div>
    <div class="navLinks">
        <ul>
            <li>
                <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                    <a href="../guide/index.html" class="button">Table of contents</a>

                    <div id="nav-summary-childs" style="display:none;">
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/training.html"><strong>1</strong><span>Training</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/gettingStarted.html"><strong>2</strong><span>Getting Started</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/runningTheApp.html"><strong>3</strong><span>Running the Application</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/writingTheServer.html"><strong>4</strong><span>Building the Server</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/writingTheClient.html"><strong>5</strong><span>Building the Client</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/nextSteps.html"><strong>6</strong><span>Next Steps</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/helpWithGrails.html"><strong>7</strong><span>Do you need help with Grails?</span></a>
                        </div>
                        
                    </div>
                </div>
            </li>
        </ul>
    </div>


</div>

<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/writingTheServer.html">&lt;&lt; <strong>4</strong><span>Building the Server</span></a></div>
                

                
                    <div class="toc-item next-right"><a href="../guide/nextSteps.html"><strong>6</strong><span>Next Steps</span> >></a></div>
                


                
                <div id="table-of-content">
                    <h2>Table of Contents</h2>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#clientAppLayout"><strong>5.1</strong><span>Default Vue.js App layout</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#writingVueComponents"><strong>5.2</strong><span>Vue Components</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#headers"><strong>5.3</strong><span>UI Header Component</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#displayComponents"><strong>5.4</strong><span>Select &amp; Table Components</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#postComponents"><strong>5.5</strong><span>Form Component</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#oneMoreComponent"><strong>5.6</strong><span>Vehicle Display</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#puttingItAllTogether"><strong>5.7</strong><span>Routing</span></a>
                    </div>
                    
                </div>
                

                

<h1 id="writingTheClient">5 Building the Client</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-vue-app/edit/master/src/main/docs/guide/writingTheClient.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>At this point our <code>server</code> project is done and we are ready to begin building our Vue.js <code>client</code> app.  Let&#8217;s get an overview of the project structure provided by the Vue profile and the Vue-CLI.</p>
</div>


<h2 id="clientAppLayout">5.1 Default Vue.js App layout</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-vue-app/edit/master/src/main/docs/guide/clientAppLayout.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>The Vue-CLI project includes all the configuration necessary to run, test and build the Vue.js project. It follows conventions that are recommended by the Vue.js community.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/vueDirListing.png" alt="vueDirListing">
</div>
<div class="title">Figure 1. /client</div>
</div>
<div class="paragraph">
<p>The <code>build</code> directory contains the webpack configuration files, including environment-specific config for dev, prod, and test environments.</p>
</div>
<div class="paragraph">
<p>The <code>config</code> directory contains non-build related configuration, including environment-specific config as described above. One config property of interest is <code>SERVER_URL</code>, which points to the URL of the Grails <code>server</code> application, and is set by default to <code><a href="http://localhost:8080" class="bare">http://localhost:8080</a></code>. You can edit this to point to another server if needed.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/vueConfig.png" alt="vueConfig">
</div>
<div class="title">Figure 2. /client/config</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
While they serve a similar function, please remember that the Vue/webpack environment settings aren&#8217;t related directly to Grails environments - e.g., if you run/build your Grails project with a specific environment, it won&#8217;t automatically affect the environment in the <code>client</code> project.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>static</code> directory contains static assets that should not be processed by webpack - you won&#8217;t be using it in this guide.</p>
</div>
<div class="paragraph">
<p>The <code>test</code>  directory contains unit and integration (end-to-end) tests for the Vue.js app.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/vueTest.png" alt="vueTest">
</div>
<div class="title">Figure 3. /client/test</div>
</div>
<div class="paragraph">
<p>The <code>src</code> directory contains the actual source code for our Vue.js project. It includes subdirectories for components, assets (e.g., CSS files), and the default Vue-Router configuration. This is a typical project structure for a Vue.js app, however you can apply whatever directory structure suits your needs within the <code>src</code> directory. This is where we will be spending most of our time in the remainder of this guide.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/vueApp.png" alt="vueApp">
</div>
<div class="title">Figure 4. /client/src</div>
</div>


<h2 id="writingVueComponents">5.2 Vue Components</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-vue-app/edit/master/src/main/docs/guide/writingVueComponents.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="sect2">
<h3 id="_single_file_components">Single File Components</h3>
<div class="paragraph">
<p>We wil create several Vue components to consume/interact with our API. We will be using <strong>single-file components</strong> in this guide. Single-file components allow us to encapsulate the template (HTML), styling, and the component&#8217;s Vue <strong>instance</strong> (which handles the data and behavior of the component) in a single file. These files have an extension of <code>.vue</code>.</p>
</div>
<div class="paragraph">
<p>Single-file components require some additional processing in order to be rendered in a browser.  The <code>client</code> project provided by the Vue profile is already configured to correctly compile single-file components.</p>
</div>
<div class="paragraph">
<p>The components are exported and can be imported into other components. They can also accept <strong>props</strong>, trigger and respond to events, and contain internal data (just like all Vue components). Refer to the <a href="https://vuejs.org/v2/guide/single-file-components.html">Vue.js documentation</a> to learn more about single-file components.</p>
</div>
</div>


<h2 id="headers">5.3 UI Header Component</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-vue-app/edit/master/src/main/docs/guide/headers.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Our first component will be a header bar. Create new file named <code>AppHeader.vue</code> under <code>client/src/components</code>, and edit as shown below:</p>
</div>
<div class="listingblock">
<div class="title">/client/src/components/AppHeader.vue</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="tag">&lt;template</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">app-header-template</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">container</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jumbotron</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">../assets/logo.png</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;h1&gt;</span>Welcome to the Garage<span class="tag">&lt;/h1&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/template&gt;</span>

<span class="tag">&lt;script&gt;</span>
<span class="inline"><span class="reserved">export</span> <span class="keyword">default</span> {
  <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">app-header</span><span class="delimiter">'</span></span>
}</span>
<span class="tag">&lt;/script&gt;</span>

<span class="tag">&lt;style&gt;</span>
<span class="tag">&lt;/style&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;template&gt;</code> contains the HTML template that will be rendered by the component. In the sample above, we are rendering a <code>&lt;div&gt;</code> tag to represent our UI&#8217;s main header, including a banner image and <code>&lt;h1&gt;</code> tag.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Every <code>&lt;template&gt;</code> must contain only one root-level element.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Within the <code>&lt;script&gt;</code> tag, we export a JavaScript object as a <strong>module</strong>. This object will be used as the <strong>instance definition</strong> for the Vue component, and is used to supply data &amp; behavior for the component. In this case, our component is entirely presentational, so we don&#8217;t have much in this object. We will see more examples of the features available in this object, later in the guide.</p>
</div>
<div class="paragraph">
<p>The final section of the single-file-component is the <code>&lt;style&gt;</code> tags. Here you can specify component-specific CSS rules. These rules will be "scoped" to the component’s template and will not affect any other HTML elements.</p>
</div>
<div class="paragraph">
<p>Create a new file named <code>VehicleFormHeader.vue</code> under <code>client/src/components/form</code> (create the <code>form</code> directory if necessary), and edit it as shown below:</p>
</div>
<div class="listingblock">
<div class="title">/client/src/components/VehicleAddHeader.vue</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="tag">&lt;template</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">add-vehicle-header-template</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">headerRow</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">row</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">col</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;h3&gt;</span>Add a Vehicle:<span class="tag">&lt;/h3&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">col</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">col</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/template&gt;</span>

<span class="tag">&lt;script&gt;</span>
<span class="inline"><span class="reserved">export</span> <span class="keyword">default</span> {
  <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">vehicle-form-header</span><span class="delimiter">'</span></span>
}</span>
<span class="tag">&lt;/script&gt;</span>

<span class="tag">&lt;style&gt;</span>
<span class="tag">&lt;/style&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
By default, when you use a component in a template, the element name will be the component&#8217;s name, hyphenated. E.g, <code>AppHeader</code> will become <code>&lt;app-header&gt;</code>.
</td>
</tr>
</table>
</div>


<h2 id="displayComponents">5.4 Select & Table Components</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-vue-app/edit/master/src/main/docs/guide/displayComponents.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="sect2">
<h3 id="_select_component">Select Component</h3>
<div class="paragraph">
<p>We&#8217;ll need a generic <code>&lt;select&gt;</code> component that will allow the user to pick from available <code>Make</code>, <code>Model</code>, and <code>Driver</code> records, when creating a new vehicle.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/vueSelect.png" alt="vueSelect">
</div>
</div>
<div class="paragraph">
<p>Create the file <code>FieldSelect.vue</code> under <code>client/src/components/form</code>, and edit the contents as shown below:</p>
</div>
<div class="listingblock">
<div class="title">/client/src/components/form/FieldSelect.vue</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;template</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">driverSelect-template</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form-group</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tag">&lt;select</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form-control</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">v-model</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">selected</span><span class="delimiter">&quot;</span></span> <span class="error">@</span><span class="attribute-name">change</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">updateValue()</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="7"></i><b>(7)</b>
      <span class="tag">&lt;option</span> <span class="attribute-name">disabled</span> <span class="attribute-name">:value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">null</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Select a {{field}}<span class="tag">&lt;/option&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
      <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tag">&lt;option</span> <span class="attribute-name">v-for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">value in values</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">:value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">value.id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">:key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">value.id</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        {{ value.name }}
      <span class="tag">&lt;/option&gt;</span>
    <span class="tag">&lt;/select&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/template&gt;</span>

<span class="tag">&lt;script&gt;</span>
<span class="inline"><span class="reserved">export</span> <span class="keyword">default</span> {
  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="key">props</span>: [<span class="string"><span class="delimiter">'</span><span class="content">values</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">field</span><span class="delimiter">'</span></span>], <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="function">data</span>: <span class="keyword">function</span> () { <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="keyword">return</span> {
      <span class="key">selected</span>: <span class="predefined-constant">null</span> <i class="conum" data-value="3"></i><b>(3)</b>
    }
  },
  <span class="key">methods</span>: { <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="function">updateValue</span>: <span class="keyword">function</span> () { <i class="conum" data-value="6"></i><b>(6)</b>
      <span class="local-variable">this</span>.<span class="predefined">$emit</span>(<span class="string"><span class="delimiter">'</span><span class="content">input</span><span class="delimiter">'</span></span>, <span class="local-variable">this</span>.selected)
    }
  }
}</span>
<span class="tag">&lt;/script&gt;</span>

<span class="tag">&lt;style&gt;</span>
<span class="inline">  <span class="comment">/* Add custom rules here */</span></span>
<span class="tag">&lt;/style&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declare a <strong>prop</strong> with the name <code>values</code> - this prop will represent our list of objects to pick from, and will be passed into the components as an HTML attribute. E.g., <code>&lt;field-select values="[obj1,obj2,obj3]"/&gt;</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The second prop is named <code>field</code>, and will represent the human-readable name of the field being selected (this is used as the default "no-selection" option).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>data()</code> function returns an object which will become the initial data (or state) of the component. In this case, we only have one variable in our <code>data</code> - <code>selected</code>, which will store the current value of the select list.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <code>v-model</code> directive sets up two-way binding between the "value" of the element and a variable in <code>data</code>. When the value changes, the model variable (<code>selected</code>) will be updated, and vice versa.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>methods</code> is an object containing arbitrary JavaScript functions, which can be called either within the template or from other methods in the component.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The <code>updateValue</code> method <strong>emits</strong> an event, which allows a parent component to respond to changes in this component. In this case, we are emitting the value of <code>selected</code>, which will be the user-selected option in the list.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>We use the <code>updateValue</code> method as an event handler for the <code>onChange</code> event of our <code>&lt;select&gt;</code> element, using the <code>@change</code> attribute (other events are also supported - <code>@click</code>, <code>@focus</code>, etc).</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">One-Way vs Two-Way Data-binding</div>
<div class="paragraph">
<p>Vue.js supports both <strong>one-way</strong> and <strong>two-way data-binding</strong>, and this component demonstrates both of those approaches. When an data variable is used in a template expression (<code>{{field}}</code>), or bound as an attribute to a component (via the <code>:value="field"</code> syntax), the element will be updated when/if the <code>field</code> variable changes. This binding is one-way - the element cannot change the value of <code>field</code> directly.</p>
</div>
<div class="paragraph">
<p>However, if an element uses the <code>v-model</code> directive, a two-way data-binding will be created. For example, <code>&lt;select v-model="selected"&gt;</code> means that the value of the <code>select</code> element will be bound to the value of <code>data.selected</code>, but if that value is changed in the element (e.g., the user selects a different option in the <code>select</code> list), then the value of <code>data.selected</code> will be updated with the new value.</p>
</div>
<div class="paragraph">
<p>This flexibility means that you can develop in Vue.js using either approach, and mix and match when appropriate. In general, one-way data-binding leads to simpler, more predictable code. However, two-way binding is convenient and can simplify the creation of forms with many fields that correspond to the component&#8217;s data. Vue.js leaves the choice to you as the developer.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_table_components">Table Components</h3>
<div class="paragraph">
<p>The next couple components will be used to display a table of vehicles in our UI. They are presentation components, so they won&#8217;t need any methods or event handling.</p>
</div>
<div class="paragraph">
<p>Create a new file named <code>TableRow.vue</code> under <code>client/src/components/table/</code>, and add the following content:</p>
</div>
<div class="listingblock">
<div class="title">/client/src/components/TableRow.vue</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="tag">&lt;template</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tablerow-template</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;tr&gt;</span> <span class="comment">&lt;!-- 1 --&gt;</span>
      <span class="tag">&lt;td&gt;</span>{{ item.id }}<span class="tag">&lt;/td&gt;</span>
      <span class="tag">&lt;td&gt;</span>{{ item.name }}<span class="tag">&lt;/td&gt;</span>
      <span class="tag">&lt;td&gt;</span>{{ item.make.name }}<span class="tag">&lt;/td&gt;</span>
      <span class="tag">&lt;td&gt;</span>{{ item.model.name }}<span class="tag">&lt;/td&gt;</span>
      <span class="tag">&lt;td&gt;</span>{{ item.driver.name }}<span class="tag">&lt;/td&gt;</span>
    <span class="tag">&lt;/tr&gt;</span>
<span class="tag">&lt;/template&gt;</span>

<span class="tag">&lt;script&gt;</span>
<span class="inline"><span class="reserved">export</span> <span class="keyword">default</span> {
  <span class="key">props</span>: [<span class="string"><span class="delimiter">'</span><span class="content">item</span><span class="delimiter">'</span></span>] <i class="conum" data-value="1"></i><b>(1)</b>
}</span>
<span class="tag">&lt;/script&gt;</span>

&lt;!-- Per Component Custom CSS Rules --&gt;
<span class="tag">&lt;style&gt;</span>
<span class="inline">  <span class="comment">/* Add custom rules here */</span></span>
<span class="tag">&lt;/style&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This component accepts a single prop of <code>item</code>, which holds the record to be rendered in the template.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Create a new file named <code>VehicleTable.vue</code> under <code>client/src/components/table/</code>, and add the following content:</p>
</div>
<div class="listingblock">
<div class="title">/client/src/components/table/VehicleTable.vue</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="tag">&lt;template</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fulltable-template</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;table</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">table</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;thead</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">thead-inverse</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;tr&gt;</span>
        <span class="tag">&lt;th&gt;</span>ID<span class="tag">&lt;/th&gt;</span>
        <span class="tag">&lt;th&gt;</span>Name<span class="tag">&lt;/th&gt;</span>
        <span class="tag">&lt;th&gt;</span>Make<span class="tag">&lt;/th&gt;</span>
        <span class="tag">&lt;th&gt;</span>Model<span class="tag">&lt;/th&gt;</span>
        <span class="tag">&lt;th&gt;</span>Driver<span class="tag">&lt;/th&gt;</span>
      <span class="tag">&lt;/tr&gt;</span>
    <span class="tag">&lt;/thead&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tag">&lt;table-row</span> <span class="attribute-name">v-for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">vehicle in vehicles</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">:item</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">vehicle</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">:key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">vehicle.id</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/table-row&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tag">&lt;/table&gt;</span>
<span class="tag">&lt;/template&gt;</span>

<span class="tag">&lt;script&gt;</span>
<span class="inline"><span class="reserved">import</span> TableRow from <span class="string"><span class="delimiter">'</span><span class="content">./TableRow.vue</span><span class="delimiter">'</span></span> <i class="conum" data-value="3"></i><b>(3)</b>

<span class="reserved">export</span> <span class="keyword">default</span> {
  <span class="key">props</span>: [<span class="string"><span class="delimiter">'</span><span class="content">vehicles</span><span class="delimiter">'</span></span>],
  <span class="key">components</span>: { <i class="conum" data-value="3"></i><b>(3)</b>
    TableRow
  }
}</span>
<span class="tag">&lt;/script&gt;</span>

<span class="tag">&lt;style&gt;</span>
<span class="inline">  <span class="comment">/* Add custom rules here */</span></span>
<span class="tag">&lt;/style&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>v-for</code> directive allows us to iterate over arrays, similar to a GSP <code>&lt;g:each&gt;</code> tag or <code>ng-for</code> directive in Angular.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Again, we are using the <code>:item</code> syntax to bind a <code>vehicle</code> object to the <code>item</code> prop of of <code>&lt;table-row&gt;</code> component. Note that we are also binding to a <code>:key</code> prop - similar to React, iteration of elements with <code>v-for</code> requires that each element have a unique <code>key</code>, which in our case is the <code>vehicle.id</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>In order to use our <code>&lt;table-row&gt;</code> component, we import it at the top of our <code>&lt;script&gt;</code> tags, and then specify it in a <code>components</code> object on our instance definition.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Notice that the <code>components</code> object is <strong>not</strong> an array, it is an object. We are using some ES6 shorthand to combine the key and value when both have the same name. In other words, the <code>components</code> object above is exactly the same as this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">components: {
      <span class="key"><span class="delimiter">'</span><span class="content">TableRow</span><span class="delimiter">'</span></span>: TableRow <span class="comment">// == TableRow</span>
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>This of course assumes that you want to use the same name for the component as the component&#8217;s <code>.vue</code> file (<code>TableRow.vue</code>, in our case). If not, you could use this object to effectively "rename" the component within your template:</p>
</div>
<div class="paragraph">
<p>Notice that the <code>components</code> object is <strong>not</strong> an array, it is an object. We are using some ES6 shorthand to combine the key and value when both have the same name. In other words, the <code>components</code> object above is exactly the same as this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">components: {
      <span class="key"><span class="delimiter">'</span><span class="content">MyCustomRow</span><span class="delimiter">'</span></span>: TableRow
    }</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>


<h2 id="postComponents">5.5 Form Component</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-vue-app/edit/master/src/main/docs/guide/postComponents.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Our final component before we wire everything together will be a form to create new vehicles, using the drivers, makes and models we&#8217;ve pre-populated in our API. This is a slightly more complicated component than we&#8217;ve created up till now, but it builds off of the same features we&#8217;ve been seeing already.</p>
</div>
<div class="paragraph">
<p>Create a new file named <code>VehicleForm.vue</code> under <code>client/src/components/form</code>, and edit it as shown below:</p>
</div>
<div class="listingblock">
<div class="title">/client/src/components/form/VehicleForm.vue</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;template</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">add-vehicle-template</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;vehicle-form-header</span><span class="tag">/&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">inputRow</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">row</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">col-sm-3</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">input-group</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
          <span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form-control</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">placeholder</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Enter a name...</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">v-model</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">vehicle.name</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="tag">&lt;/div&gt;</span>
      <span class="tag">&lt;/div&gt;</span>
      <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">col-sm-7</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">row</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
          <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">col-sm-4</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;field-select</span> <span class="attribute-name">v-model</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">vehicle.make</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">:field</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">'Make'</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">:values</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">makes</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/field-select&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
          <span class="tag">&lt;/div&gt;</span>
          <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">col-sm-4</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;field-select</span> <span class="attribute-name">v-model</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">vehicle.model</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">:field</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">'Model'</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">:values</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">models</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/field-select&gt;</span>  <i class="conum" data-value="4"></i><b>(4)</b>
          <span class="tag">&lt;/div&gt;</span>
          <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">col-sm-4</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;field-select</span> <span class="attribute-name">v-model</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">vehicle.driver</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">:field</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">'Driver'</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">:values</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">drivers</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/field-select&gt;</span>
          <span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;/div&gt;</span>
      <span class="tag">&lt;/div&gt;</span>
      <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">col-sm-2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">btn-group</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">role</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">group</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aria-label</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Add new vehicle</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
          <span class="tag">&lt;button</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">button</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">btn btn-success</span><span class="delimiter">&quot;</span></span> <span class="error">@</span><span class="attribute-name">click</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit()</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Add to Garage<span class="tag">&lt;/button&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
        <span class="tag">&lt;/div&gt;</span>
      <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>

<span class="tag">&lt;/template&gt;</span>

<span class="tag">&lt;script&gt;</span>
<span class="inline"><span class="reserved">import</span> VehicleFormHeader from <span class="string"><span class="delimiter">'</span><span class="content">./VehicleFormHeader</span><span class="delimiter">'</span></span>
<span class="reserved">import</span> FieldSelect from <span class="string"><span class="delimiter">'</span><span class="content">./FieldSelect</span><span class="delimiter">'</span></span>

<span class="reserved">export</span> <span class="keyword">default</span> {
  <span class="key">props</span>: [<span class="string"><span class="delimiter">'</span><span class="content">vehicle</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">makes</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">models</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">drivers</span><span class="delimiter">'</span></span>], <i class="conum" data-value="6"></i><b>(6)</b>
  <span class="key">model</span>: {
    <span class="key">prop</span>: <span class="string"><span class="delimiter">'</span><span class="content">vehicle</span><span class="delimiter">'</span></span>, <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="key">event</span>: <span class="string"><span class="delimiter">'</span><span class="content">change</span><span class="delimiter">'</span></span>
  },
  <span class="key">components</span>: {
    VehicleFormHeader,
    FieldSelect
  },
  <span class="key">methods</span>: {
    submit () { <i class="conum" data-value="5"></i><b>(5)</b>
      <span class="local-variable">this</span>.<span class="predefined">$emit</span>(<span class="string"><span class="delimiter">'</span><span class="content">submit</span><span class="delimiter">'</span></span>)
    }
  }
}</span>
<span class="tag">&lt;/script&gt;</span>

<span class="tag">&lt;style&gt;</span>
<span class="inline">  <span class="comment">/* Add custom rules here */</span></span>
<span class="tag">&lt;/style&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is the <code>VehicleFormHeader</code> component we created earlier.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Again, we are using the <code>v-model</code> directive to bind the value of an input to a variable in our <code>data</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This is the <code>FieldSelect</code> component we created earlier - note that we are using the <code>v-model</code> directive for two-way binding (allowing the component to update our data), as well as using one-way data-binding to pass in a list of <code>:values</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Since we wrote the <code>FieldSelect</code> component generically, we can reuse it for each of the select lists in our form.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Note that we&#8217;re not actually making the POST call to create a vehicle in this component - that task will be delegatd to the parent component, by <strong>emitting</strong> a <code>submit</code> event (as done here in the <code>submit()</code> method).</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The <code>vehicle</code> prop represents the "new" vehicle object being created from the fields in this form. The <code>makes</code>, <code>models</code>, and <code>drivers</code> props will be the lists of records used to populate the select components.</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_next_step">Next Step</h3>
<div class="paragraph">
<p>At this point, we have all the components we need to build a form and display our vehicles in a table. We still need to implement our API integration, and then put all these pieces together into a working application.</p>
</div>
</div>


<h2 id="oneMoreComponent">5.6 Vehicle Display</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-vue-app/edit/master/src/main/docs/guide/oneMoreComponent.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Create a new file named <code>Garage.vue</code> under <code>client/src/components/</code>, and edit it as shown below:</p>
</div>
<div class="listingblock">
<div class="title">/client/src/components/Garage.vue</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;template&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">garage</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;app-header&gt;</span><span class="tag">&lt;/app-header&gt;</span>
    <span class="tag">&lt;vehicle-form</span> <span class="attribute-name">v-model</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">vehicle</span><span class="delimiter">&quot;</span></span>
                  <span class="attribute-name">:makes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">makes</span><span class="delimiter">&quot;</span></span>
                  <span class="attribute-name">:models</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">models</span><span class="delimiter">&quot;</span></span>
                  <span class="attribute-name">:drivers</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">drivers</span><span class="delimiter">&quot;</span></span>
                  <span class="error">@</span><span class="attribute-name">submit</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submitNewVehicle()</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

    <span class="tag">&lt;/vehicle-form&gt;</span>
    <span class="tag">&lt;vehicle-table</span> <span class="attribute-name">:vehicles</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">vehicles</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/vehicle-table&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/template&gt;</span>

<span class="tag">&lt;script&gt;</span>
<span class="inline">  <span class="reserved">import</span> AppHeader from <span class="string"><span class="delimiter">'</span><span class="content">./AppHeader</span><span class="delimiter">'</span></span>
  <span class="reserved">import</span> VehicleForm from <span class="string"><span class="delimiter">'</span><span class="content">./form/VehicleForm</span><span class="delimiter">'</span></span>
  <span class="reserved">import</span> VehicleTable from <span class="string"><span class="delimiter">'</span><span class="content">./table/VehicleTable</span><span class="delimiter">'</span></span>

  <span class="reserved">export</span> <span class="keyword">default</span> {
    <span class="key">components</span>: {
      AppHeader,
      VehicleForm,
      VehicleTable
    },
    <span class="function">data</span>: <span class="keyword">function</span> () {
      <span class="keyword">return</span> {
        <span class="key">vehicles</span>: [],
        <span class="key">vehicle</span>: {<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, <span class="key">make</span>: <span class="predefined-constant">null</span>, <span class="key">model</span>: <span class="predefined-constant">null</span>, <span class="key">driver</span>: <span class="predefined-constant">null</span>},
        <span class="key">models</span>: [],
        <span class="key">makes</span>: [],
        <span class="key">drivers</span>: [],
        <span class="key">serverURL</span>: process.env.SERVER_URL
      }
    },
    created () {
      <span class="local-variable">this</span>.fetchData()
    },
    <span class="key">methods</span>: {
      <span class="key">fetchData</span>: async <span class="keyword">function</span> () {
        <span class="keyword">try</span> {
          await Promise.all([
            <span class="local-variable">this</span>.fetchVehicles(),
            <span class="local-variable">this</span>.fetchModels(),
            <span class="local-variable">this</span>.fetchModels(),
            <span class="local-variable">this</span>.fetchMakes(),
            <span class="local-variable">this</span>.fetchDrivers()
          ])
        } <span class="keyword">catch</span> (error) {
          console.log(error)
        }
      },
      <span class="function">fetchVehicles</span>: <span class="keyword">function</span> () {
        fetch(<span class="error">`</span><span class="predefined">$</span>{<span class="local-variable">this</span>.serverURL}/vehicle<span class="error">`</span>)
          .then(r =&gt; r.json())
          .then(json =&gt; { <span class="local-variable">this</span>.vehicles = json })
          .<span class="keyword">catch</span>(error =&gt; console.error(<span class="string"><span class="delimiter">'</span><span class="content">Error retrieving vehicles: </span><span class="delimiter">'</span></span> + error))
      },
      <span class="function">fetchModels</span>: <span class="keyword">function</span> () {
        fetch(<span class="error">`</span><span class="predefined">$</span>{<span class="local-variable">this</span>.serverURL}/model<span class="error">`</span>)
          .then(r =&gt; r.json())
          .then(json =&gt; { <span class="local-variable">this</span>.models = json })
          .<span class="keyword">catch</span>(error =&gt; console.error(<span class="string"><span class="delimiter">'</span><span class="content">Error retrieving models: </span><span class="delimiter">'</span></span> + error))
      },
      <span class="function">fetchMakes</span>: <span class="keyword">function</span> () {
        fetch(<span class="error">`</span><span class="predefined">$</span>{<span class="local-variable">this</span>.serverURL}/make<span class="error">`</span>)
          .then(r =&gt; r.json())
          .then(json =&gt; { <span class="local-variable">this</span>.makes = json })
          .<span class="keyword">catch</span>(error =&gt; console.error(<span class="string"><span class="delimiter">'</span><span class="content">Error retrieving makes: </span><span class="delimiter">'</span></span> + error))
      },
      <span class="function">fetchDrivers</span>: <span class="keyword">function</span> () {
        fetch(<span class="error">`</span><span class="predefined">$</span>{<span class="local-variable">this</span>.serverURL}/driver<span class="error">`</span>)
          .then(r =&gt; r.json())
          .then(json =&gt; { <span class="local-variable">this</span>.drivers = json })
          .<span class="keyword">catch</span>(error =&gt; console.error(<span class="string"><span class="delimiter">'</span><span class="content">Error retrieving drivers: </span><span class="delimiter">'</span></span> + error))
      },
      <span class="function">submitNewVehicle</span>: <span class="keyword">function</span> () {
        const vehicle = <span class="local-variable">this</span>.vehicle
        fetch(<span class="error">`</span><span class="predefined">$</span>{<span class="local-variable">this</span>.serverURL}/vehicle<span class="error">`</span>, {
          <span class="key">method</span>: <span class="string"><span class="delimiter">'</span><span class="content">POST</span><span class="delimiter">'</span></span>,
          <span class="key">headers</span>: {<span class="key"><span class="delimiter">'</span><span class="content">Content-Type</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">application/json</span><span class="delimiter">'</span></span>},
          <span class="key">body</span>: JSON.stringify(vehicle)
        }).then(r =&gt; r.json())
          .then(json =&gt; {
            <span class="local-variable">this</span>.vehicles.push(json)
            <span class="local-variable">this</span>.vehicle = {<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, <span class="key">make</span>: <span class="predefined-constant">null</span>, <span class="key">model</span>: <span class="predefined-constant">null</span>, <span class="key">driver</span>: <span class="predefined-constant">null</span>}
          })
          .<span class="keyword">catch</span>(ex =&gt; console.error(<span class="string"><span class="delimiter">'</span><span class="content">Unable to save vehicle</span><span class="delimiter">'</span></span>, ex))
    }
  }</span>
<span class="tag">&lt;/script&gt;</span>

<span class="comment">&lt;!-- Per Component Custom CSS Rules --&gt;</span>
<span class="tag">&lt;style&gt;</span>
<span class="inline">  <span class="id">#garage</span> {
    <span class="key">font-family</span>: <span class="string"><span class="delimiter">'</span><span class="content">Avenir</span><span class="delimiter">'</span></span>, <span class="value">Helvetica</span>, <span class="value">Arial</span>, <span class="value">sans-serif</span>;
    <span class="key">text-align</span>: <span class="value">center</span>;
    <span class="key">color</span>: <span class="color">#2c3e50</span>;
  }</span>
<span class="tag">&lt;/style&gt;</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_breaking_it_down">Breaking it down</h3>
<div class="paragraph">
<p>Because this is a large component, we&#8217;ll go through it in sections.</p>
</div>
<div class="listingblock">
<div class="title">/client/src/components/Garage.vue</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;template&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">garage</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;app-header&gt;</span><span class="tag">&lt;/app-header&gt;</span>
    <span class="tag">&lt;vehicle-form</span> <span class="attribute-name">v-model</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">vehicle</span><span class="delimiter">&quot;</span></span>
                  <span class="attribute-name">:makes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">makes</span><span class="delimiter">&quot;</span></span>
                  <span class="attribute-name">:models</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">models</span><span class="delimiter">&quot;</span></span>
                  <span class="attribute-name">:drivers</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">drivers</span><span class="delimiter">&quot;</span></span>
                  <span class="error">@</span><span class="attribute-name">submit</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submitNewVehicle()</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="tag">&lt;/vehicle-form&gt;</span>
    <span class="tag">&lt;vehicle-table</span> <span class="attribute-name">:vehicles</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">vehicles</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/vehicle-table&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/template&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We&#8217;ve set the <code>submitNewVehicle()</code> method (which we&#8217;ll see shortly) as an event handler for the <code>submit</code> event (which we emitted in the <code>VehicleForm.submit()</code> function).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We bind our <code>vehicles</code> data variable to the <code>vehicles</code> prop of the <code>VehicleTable</code> component.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">/client/src/components/Garage.vue</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;script&gt;</span>
<span class="inline"><span class="reserved">import</span> AppHeader from <span class="string"><span class="delimiter">'</span><span class="content">./AppHeader</span><span class="delimiter">'</span></span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="reserved">import</span> VehicleForm from <span class="string"><span class="delimiter">'</span><span class="content">./form/VehicleForm</span><span class="delimiter">'</span></span>
<span class="reserved">import</span> VehicleTable from <span class="string"><span class="delimiter">'</span><span class="content">./table/VehicleTable</span><span class="delimiter">'</span></span>

<span class="reserved">export</span> <span class="keyword">default</span> {
  <span class="key">components</span>: { <i class="conum" data-value="1"></i><b>(1)</b>
    AppHeader,
    VehicleForm,
    VehicleTable
  },
  <span class="function">data</span>: <span class="keyword">function</span> () { <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="keyword">return</span> {
      <span class="key">vehicles</span>: [],
      <span class="key">vehicle</span>: {<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, <span class="key">make</span>: <span class="predefined-constant">null</span>, <span class="key">model</span>: <span class="predefined-constant">null</span>, <span class="key">driver</span>: <span class="predefined-constant">null</span>},
      <span class="key">models</span>: [],
      <span class="key">makes</span>: [],
      <span class="key">drivers</span>: [],
      <span class="key">serverURL</span>: process.env.SERVER_URL <i class="conum" data-value="3"></i><b>(3)</b>
    }
  },</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Importing our components for use in the template</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Our <code>data()</code> function returns the initial state for the component. It is important that we initialize all the variables we intend to use in this <code>data</code> object, because if we add a variable afterwards it will not be treated as a reactive property (i.e, changes to the variable will not trigger an update to the component).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>SERVER_URL</code> is a config variable set in <code>client/config/dev.env.js</code> (there are equivalent config files for <code>test</code> and <code>prod</code> environments). You can change the base URL for the API calls below by changing the <code>SERVER_URL</code> variable.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">/client/src/components/Garage.vue</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html">  created () { <i class="conum" data-value="1"></i><b>(1)</b>
    this.fetchData()
  },
  methods: {
    fetchData: async function () { <i class="conum" data-value="2"></i><b>(2)</b>
      try {
        Promise.all([<i class="conum" data-value="3"></i><b>(3)</b>
          this.fetchVehicles(),
          this.fetchModels(),
          this.fetchModels(),
          this.fetchMakes(),
          this.fetchDrivers()
        ])
      } catch (error) {
        console.log(error)
      }
    },</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>created</code> is one of several <strong>lifecycle hooks</strong>, which are methods that are called at specific points in a component lifecycle (other methods available include <strong>beforeUpdate</strong>, <strong>updated</strong>, <strong>mounted</strong>, etc. You can learn about the available lifecycle hooks from the <a href="https://vuejs.org/v2/guide/instance.html#Instance-Lifecycle-Hooks:">Vue.js documentation</a></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>fetchData</code> method is where we call several other methods to retrieve data from the API. Since these API calls are independent and don&#8217;t need to be run synchronously, we have added the <strong>async</strong> keyword to this function.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Within a <code>try</code>/<code>catch</code> block, we "chain" our multiple API calls using the <code>Promise</code> API. Since we are not returning anything from these methods, we don&#8217;t need to use the <code>await</code> keyword that is often used in an <code>async</code> function.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">/client/src/components/Garage.vue</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html">    fetchVehicles: function () { <i class="conum" data-value="1"></i><b>(1)</b>
      fetch(`${this.serverURL}/vehicle`)
        .then(r =<span class="error">&gt;</span> r.json())
        .then(json =<span class="error">&gt;</span> { this.vehicles = json })
        .catch(error =<span class="error">&gt;</span> console.error('Error retrieving vehicles: ' + error))
    },
    fetchModels: function () {
      fetch(`${this.serverURL}/model`)
        .then(r =<span class="error">&gt;</span> r.json())
        .then(json =<span class="error">&gt;</span> { this.models = json })
        .catch(error =<span class="error">&gt;</span> console.error('Error retrieving models: ' + error))
    },
    fetchMakes: function () {
      fetch(`${this.serverURL}/make`)
        .then(r =<span class="error">&gt;</span> r.json())
        .then(json =<span class="error">&gt;</span> { this.makes = json })
        .catch(error =<span class="error">&gt;</span> console.error('Error retrieving makes: ' + error))
    },
    fetchDrivers: function () {
      fetch(`${this.serverURL}/driver`)
        .then(r =<span class="error">&gt;</span> r.json())
        .then(json =<span class="error">&gt;</span> { this.drivers = json })
        .catch(error =<span class="error">&gt;</span> console.error('Error retrieving drivers: ' + error))
    },</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The next few methods will make the respective API calls referenced in the previous code snippet. We are using the <code>fetch</code> API to make GET calls to our resource endpoints, parse the JSON, and store the data in the appropriate <code>data</code> variable.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">/client/src/components/Garage.vue</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html">    submitNewVehicle: function () {
      const vehicle = this.vehicle <i class="conum" data-value="1"></i><b>(1)</b>
      fetch(`${this.serverURL}/vehicle`, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(vehicle)
      }).then(r =<span class="error">&gt;</span> r.json())
        .then(json =<span class="error">&gt;</span> {
          this.vehicles.push(json) <i class="conum" data-value="2"></i><b>(2)</b>
          this.vehicle = {name: '', make: null, model: null, driver: null} <i class="conum" data-value="3"></i><b>(3)</b>
        })
        .catch(ex =<span class="error">&gt;</span> console.error('Unable to save vehicle', ex))
    }
  }
}
<span class="tag">&lt;/script&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Because we stored the <code>vehicle</code> object (used by the <code>VehicleForm</code> component) in our top-level component&#8217;s <code>data</code>, making a <code>POST</code> request to save the vehicle instance is trivial - we simply grab the variable from our <code>data</code> (e.g., <code>this.vehicle</code>), convert it to a JSON string, and make a POST request using <code>fetch</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>POST</code> request will return the newly created vehicle instance, which we simply <code>push</code> onto our <code>data.vehicles</code> array.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>After adding the new vehicle to the list, we "reset" the form by setting <code>data.vehicle</code> to an empty object (remembering to initialize the needed fields with empty/<code>null</code> values)</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">/client/src/components/Garage.vue</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="comment">&lt;!-- Per Component Custom CSS Rules --&gt;</span>
<i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;style&gt;</span>
<span class="inline">  <span class="id">#garage</span> {
    <span class="key">font-family</span>: <span class="string"><span class="delimiter">'</span><span class="content">Avenir</span><span class="delimiter">'</span></span>, <span class="value">Helvetica</span>, <span class="value">Arial</span>, <span class="value">sans-serif</span>;
    <span class="key">text-align</span>: <span class="value">center</span>;
    <span class="key">color</span>: <span class="color">#2c3e50</span>;
  }</span>
<span class="tag">&lt;/style&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A few styles are included here to pretty up the layout of the app - feel free to use whatever styles you&#8217;d like. Note that these styles are constrained (or <strong>scoped</strong>) to the component&#8217;s own template.</td>
</tr>
</table>
</div>
</div>


<h2 id="puttingItAllTogether">5.7 Routing</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-vue-app/edit/master/src/main/docs/guide/puttingItAllTogether.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>If you were to run the <code>client</code> app now (or reload if you&#8217;ve kept the <code>client:start</code> task running while you followed through the guide), you would notice that the default home page hasn&#8217;t changed. This is because Vue Router - the official routing library for Vue.js apps - is configured to display the <code>Welcome</code> component at the index route. Fortunately, this is a simple change.</p>
</div>
<div class="paragraph">
<p>Edit the file <code>client/src/router/index.js</code> as shown below:</p>
</div>
<div class="listingblock">
<div class="title">/client/src/router/index.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> Vue from <span class="string"><span class="delimiter">'</span><span class="content">vue</span><span class="delimiter">'</span></span>
<span class="reserved">import</span> Router from <span class="string"><span class="delimiter">'</span><span class="content">vue-router</span><span class="delimiter">'</span></span>
<span class="reserved">import</span> Garage from <span class="string"><span class="delimiter">'</span><span class="content">@/components/Garage</span><span class="delimiter">'</span></span> <i class="conum" data-value="1"></i><b>(1)</b>

Vue.use(Router)

<span class="reserved">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router({
  <span class="key">routes</span>: [
    {
      <span class="key">path</span>: <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>,
      <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">Garage</span><span class="delimiter">'</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="key">component</span>: Garage <i class="conum" data-value="1"></i><b>(1)</b>
    }
  ]
})</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Replace the import and usages of the <code>Welcome</code> component with our <code>Garage</code> component, for the index <code>/</code> route.</td>
</tr>
</table>
</div>
<div class="sect1">
<h2 id="_run_the_application">Run the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Run the <code>client</code> project with <code>./gradlew client:start</code>, and browse to <code><a href="http://localhost:3000" class="bare">http://localhost:3000</a></code>. You should see our new Vue app, and be able to interact with the Grails REST API. Congratulations, you&#8217;ve built a Vue.js app with Grails!</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/complete.png" alt="complete">
</div>
</div>
</div>
</div>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/writingTheServer.html">&lt;&lt; <strong>4</strong><span>Building the Server</span></a></div>
                
                    <div class="toc-item next-right"><a href="../guide/nextSteps.html"><strong>6</strong><span>Next Steps</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title" style="text-align: right"><a href="https://travis-ci.org/grails-guides/building-a-vue-app"><img src="https://travis-ci.org/grails-guides/building-a-vue-app.svg?branch=master" /></a></div>            
                 <div class="local-title">
                    <a href="https://github.com/grails-guides/building-a-vue-app">
                    <svg height="35" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="35" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></a> &nbsp;&nbsp;Get the Code
                </div>
                <div class="menu">
                    <div class="input-group">                        
                        <button href="#" onclick="document.getElementById('github-url').value='git@github.com:grails-guides/building-a-vue-app.git'" class="codeButton">SSH</button>
                        <button onclick="document.getElementById('github-url').value='https://github.com/grails-guides/building-a-vue-app.git'" class="codeButton">HTTPS</button>
                        <button onclick="document.getElementById('github-url').value='https://github.com/grails-guides/building-a-vue-app'" class="codeButton">Subversion</button>
                    </div>
       
                    <div class="input-group">                    
                        <!-- Target -->
                        <input id="github-url" value="git@github.com:grails-guides/building-a-vue-app.git" type="text" />

                        <!-- Trigger -->
                        <button class="clipbtn" type="button" data-clipboard-target="#github-url">

                            <img width="13" src="../img/clippy.svg" alt="Copy to clipboard">
                        </button>       

                    </div>
                    <div class="input-group">
                      <a href="https://github.com/grails-guides/building-a-vue-app/archive/master.zip" class="downloadButton">Download ZIP</a>
                    </div>
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    Copies of this document may be made for your own use and for distribution to others, provided that you do not charge any fee for such copies and further provided that each copy contains this Copyright Notice, whether distributed in print or electronically. All guides are released with an ASLv2 license for the code, and Creative Commons license for the writing. 
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
