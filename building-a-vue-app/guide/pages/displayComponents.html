<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>5.4 Select &amp; Table Components</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/guide.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />            
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <div class="navTitle">
        
        Grails Framework Guide 
    </div>
    <div class="navLinks">
        <ul>
            <li>
                <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                    <a href="../../guide/index.html" class="button">Table of contents</a>

                    <div id="nav-summary-childs" style="display:none;">
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/training.html"><strong>1</strong><span>Training</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/gettingStarted.html"><strong>2</strong><span>Getting Started</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/runningTheApp.html"><strong>3</strong><span>Running the Application</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/writingTheServer.html"><strong>4</strong><span>Building the Server</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/writingTheClient.html"><strong>5</strong><span>Building the Client</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/nextSteps.html"><strong>6</strong><span>Next Steps</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/helpWithGrails.html"><strong>7</strong><span>Do you need help with Grails?</span></a>
                        </div>
                        
                    </div>
                </div>
            </li>
        </ul>
    </div>


</div>

<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/writingTheServer.html">&lt;&lt; <strong>4</strong><span>Building the Server</span></a></div>
                

                
                    <div class="toc-item next-right"><a href="../../guide/nextSteps.html"><strong>6</strong><span>Next Steps</span> >></a></div>
                


                

                

<h2 id="displayComponents">5.4 Select & Table Components</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-vue-app/edit/master/src/main/docs/guide/displayComponents.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="sect2">
<h3 id="_select_component">Select Component</h3>
<div class="paragraph">
<p>We&#8217;ll need a generic <code>&lt;select&gt;</code> component that will allow the user to pick from available <code>Make</code>, <code>Model</code>, and <code>Driver</code> records, when creating a new vehicle.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/vueSelect.png" alt="vueSelect">
</div>
</div>
<div class="paragraph">
<p>Create the file <code>FieldSelect.vue</code> under <code>client/src/components/form</code>, and edit the contents as shown below:</p>
</div>
<div class="listingblock">
<div class="title">/client/src/components/form/FieldSelect.vue</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;template</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">driverSelect-template</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form-group</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tag">&lt;select</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form-control</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">v-model</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">selected</span><span class="delimiter">&quot;</span></span> <span class="error">@</span><span class="attribute-name">change</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">updateValue()</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="7"></i><b>(7)</b>
      <span class="tag">&lt;option</span> <span class="attribute-name">disabled</span> <span class="attribute-name">:value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">null</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Select a {{field}}<span class="tag">&lt;/option&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
      <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tag">&lt;option</span> <span class="attribute-name">v-for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">value in values</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">:value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">value.id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">:key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">value.id</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        {{ value.name }}
      <span class="tag">&lt;/option&gt;</span>
    <span class="tag">&lt;/select&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/template&gt;</span>

<span class="tag">&lt;script&gt;</span>
<span class="inline"><span class="reserved">export</span> <span class="keyword">default</span> {
  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="key">props</span>: [<span class="string"><span class="delimiter">'</span><span class="content">values</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">field</span><span class="delimiter">'</span></span>], <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="function">data</span>: <span class="keyword">function</span> () { <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="keyword">return</span> {
      <span class="key">selected</span>: <span class="predefined-constant">null</span> <i class="conum" data-value="3"></i><b>(3)</b>
    }
  },
  <span class="key">methods</span>: { <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="function">updateValue</span>: <span class="keyword">function</span> () { <i class="conum" data-value="6"></i><b>(6)</b>
      <span class="local-variable">this</span>.<span class="predefined">$emit</span>(<span class="string"><span class="delimiter">'</span><span class="content">input</span><span class="delimiter">'</span></span>, <span class="local-variable">this</span>.selected)
    }
  }
}</span>
<span class="tag">&lt;/script&gt;</span>

<span class="tag">&lt;style&gt;</span>
<span class="inline">  <span class="comment">/* Add custom rules here */</span></span>
<span class="tag">&lt;/style&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declare a <strong>prop</strong> with the name <code>values</code> - this prop will represent our list of objects to pick from, and will be passed into the components as an HTML attribute. E.g., <code>&lt;field-select values="[obj1,obj2,obj3]"/&gt;</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The second prop is named <code>field</code>, and will represent the human-readable name of the field being selected (this is used as the default "no-selection" option).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>data()</code> function returns an object which will become the initial data (or state) of the component. In this case, we only have one variable in our <code>data</code> - <code>selected</code>, which will store the current value of the select list.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <code>v-model</code> directive sets up two-way binding between the "value" of the element and a variable in <code>data</code>. When the value changes, the model variable (<code>selected</code>) will be updated, and vice versa.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>methods</code> is an object containing arbitrary JavaScript functions, which can be called either within the template or from other methods in the component.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The <code>updateValue</code> method <strong>emits</strong> an event, which allows a parent component to respond to changes in this component. In this case, we are emitting the value of <code>selected</code>, which will be the user-selected option in the list.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>We use the <code>updateValue</code> method as an event handler for the <code>onChange</code> event of our <code>&lt;select&gt;</code> element, using the <code>@change</code> attribute (other events are also supported - <code>@click</code>, <code>@focus</code>, etc).</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">One-Way vs Two-Way Data-binding</div>
<div class="paragraph">
<p>Vue.js supports both <strong>one-way</strong> and <strong>two-way data-binding</strong>, and this component demonstrates both of those approaches. When an data variable is used in a template expression (<code>{{field}}</code>), or bound as an attribute to a component (via the <code>:value="field"</code> syntax), the element will be updated when/if the <code>field</code> variable changes. This binding is one-way - the element cannot change the value of <code>field</code> directly.</p>
</div>
<div class="paragraph">
<p>However, if an element uses the <code>v-model</code> directive, a two-way data-binding will be created. For example, <code>&lt;select v-model="selected"&gt;</code> means that the value of the <code>select</code> element will be bound to the value of <code>data.selected</code>, but if that value is changed in the element (e.g., the user selects a different option in the <code>select</code> list), then the value of <code>data.selected</code> will be updated with the new value.</p>
</div>
<div class="paragraph">
<p>This flexibility means that you can develop in Vue.js using either approach, and mix and match when appropriate. In general, one-way data-binding leads to simpler, more predictable code. However, two-way binding is convenient and can simplify the creation of forms with many fields that correspond to the component&#8217;s data. Vue.js leaves the choice to you as the developer.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_table_components">Table Components</h3>
<div class="paragraph">
<p>The next couple components will be used to display a table of vehicles in our UI. They are presentation components, so they won&#8217;t need any methods or event handling.</p>
</div>
<div class="paragraph">
<p>Create a new file named <code>TableRow.vue</code> under <code>client/src/components/table/</code>, and add the following content:</p>
</div>
<div class="listingblock">
<div class="title">/client/src/components/TableRow.vue</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="tag">&lt;template</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tablerow-template</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;tr&gt;</span> <span class="comment">&lt;!-- 1 --&gt;</span>
      <span class="tag">&lt;td&gt;</span>{{ item.id }}<span class="tag">&lt;/td&gt;</span>
      <span class="tag">&lt;td&gt;</span>{{ item.name }}<span class="tag">&lt;/td&gt;</span>
      <span class="tag">&lt;td&gt;</span>{{ item.make.name }}<span class="tag">&lt;/td&gt;</span>
      <span class="tag">&lt;td&gt;</span>{{ item.model.name }}<span class="tag">&lt;/td&gt;</span>
      <span class="tag">&lt;td&gt;</span>{{ item.driver.name }}<span class="tag">&lt;/td&gt;</span>
    <span class="tag">&lt;/tr&gt;</span>
<span class="tag">&lt;/template&gt;</span>

<span class="tag">&lt;script&gt;</span>
<span class="inline"><span class="reserved">export</span> <span class="keyword">default</span> {
  <span class="key">props</span>: [<span class="string"><span class="delimiter">'</span><span class="content">item</span><span class="delimiter">'</span></span>] <i class="conum" data-value="1"></i><b>(1)</b>
}</span>
<span class="tag">&lt;/script&gt;</span>

&lt;!-- Per Component Custom CSS Rules --&gt;
<span class="tag">&lt;style&gt;</span>
<span class="inline">  <span class="comment">/* Add custom rules here */</span></span>
<span class="tag">&lt;/style&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This component accepts a single prop of <code>item</code>, which holds the record to be rendered in the template.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Create a new file named <code>VehicleTable.vue</code> under <code>client/src/components/table/</code>, and add the following content:</p>
</div>
<div class="listingblock">
<div class="title">/client/src/components/table/VehicleTable.vue</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="tag">&lt;template</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fulltable-template</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;table</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">table</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;thead</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">thead-inverse</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;tr&gt;</span>
        <span class="tag">&lt;th&gt;</span>ID<span class="tag">&lt;/th&gt;</span>
        <span class="tag">&lt;th&gt;</span>Name<span class="tag">&lt;/th&gt;</span>
        <span class="tag">&lt;th&gt;</span>Make<span class="tag">&lt;/th&gt;</span>
        <span class="tag">&lt;th&gt;</span>Model<span class="tag">&lt;/th&gt;</span>
        <span class="tag">&lt;th&gt;</span>Driver<span class="tag">&lt;/th&gt;</span>
      <span class="tag">&lt;/tr&gt;</span>
    <span class="tag">&lt;/thead&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tag">&lt;table-row</span> <span class="attribute-name">v-for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">vehicle in vehicles</span><span class="delimiter">&quot;</span></span>
                 <span class="attribute-name">:item</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">vehicle</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">:key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">vehicle.id</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/table-row&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tag">&lt;/table&gt;</span>
<span class="tag">&lt;/template&gt;</span>

<span class="tag">&lt;script&gt;</span>
<span class="inline"><span class="reserved">import</span> TableRow from <span class="string"><span class="delimiter">'</span><span class="content">./TableRow.vue</span><span class="delimiter">'</span></span> <i class="conum" data-value="3"></i><b>(3)</b>

<span class="reserved">export</span> <span class="keyword">default</span> {
  <span class="key">props</span>: [<span class="string"><span class="delimiter">'</span><span class="content">vehicles</span><span class="delimiter">'</span></span>],
  <span class="key">components</span>: { <i class="conum" data-value="3"></i><b>(3)</b>
    TableRow
  }
}</span>
<span class="tag">&lt;/script&gt;</span>

<span class="tag">&lt;style&gt;</span>
<span class="inline">  <span class="comment">/* Add custom rules here */</span></span>
<span class="tag">&lt;/style&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>v-for</code> directive allows us to iterate over arrays, similar to a GSP <code>&lt;g:each&gt;</code> tag or <code>ng-for</code> directive in Angular.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Again, we are using the <code>:item</code> syntax to bind a <code>vehicle</code> object to the <code>item</code> prop of of <code>&lt;table-row&gt;</code> component. Note that we are also binding to a <code>:key</code> prop - similar to React, iteration of elements with <code>v-for</code> requires that each element have a unique <code>key</code>, which in our case is the <code>vehicle.id</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>In order to use our <code>&lt;table-row&gt;</code> component, we import it at the top of our <code>&lt;script&gt;</code> tags, and then specify it in a <code>components</code> object on our instance definition.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Notice that the <code>components</code> object is <strong>not</strong> an array, it is an object. We are using some ES6 shorthand to combine the key and value when both have the same name. In other words, the <code>components</code> object above is exactly the same as this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">components: {
      <span class="key"><span class="delimiter">'</span><span class="content">TableRow</span><span class="delimiter">'</span></span>: TableRow <span class="comment">// == TableRow</span>
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>This of course assumes that you want to use the same name for the component as the component&#8217;s <code>.vue</code> file (<code>TableRow.vue</code>, in our case). If not, you could use this object to effectively "rename" the component within your template:</p>
</div>
<div class="paragraph">
<p>Notice that the <code>components</code> object is <strong>not</strong> an array, it is an object. We are using some ES6 shorthand to combine the key and value when both have the same name. In other words, the <code>components</code> object above is exactly the same as this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">components: {
      <span class="key"><span class="delimiter">'</span><span class="content">MyCustomRow</span><span class="delimiter">'</span></span>: TableRow
    }</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/writingTheServer.html">&lt;&lt; <strong>4</strong><span>Building the Server</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/nextSteps.html"><strong>6</strong><span>Next Steps</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title" style="text-align: right"><a href="https://travis-ci.org/grails-guides/building-a-vue-app"><img src="https://travis-ci.org/grails-guides/building-a-vue-app.svg?branch=master" /></a></div>            
                 <div class="local-title">
                    <a href="https://github.com/grails-guides/building-a-vue-app">
                    <svg height="35" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="35" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></a> &nbsp;&nbsp;Get the Code
                </div>
                <div class="menu">
                    <div class="input-group">                        
                        <button href="#" onclick="document.getElementById('github-url').value='git@github.com:grails-guides/building-a-vue-app.git'" class="codeButton">SSH</button>
                        <button onclick="document.getElementById('github-url').value='https://github.com/grails-guides/building-a-vue-app.git'" class="codeButton">HTTPS</button>
                        <button onclick="document.getElementById('github-url').value='https://github.com/grails-guides/building-a-vue-app'" class="codeButton">Subversion</button>
                    </div>
       
                    <div class="input-group">                    
                        <!-- Target -->
                        <input id="github-url" value="git@github.com:grails-guides/building-a-vue-app.git" type="text" />

                        <!-- Trigger -->
                        <button class="clipbtn" type="button" data-clipboard-target="#github-url">

                            <img width="13" src="../img/clippy.svg" alt="Copy to clipboard">
                        </button>       

                    </div>
                    <div class="input-group">
                      <a href="https://github.com/grails-guides/building-a-vue-app/archive/master.zip" class="downloadButton">Download ZIP</a>
                    </div>
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    Copies of this document may be made for your own use and for distribution to others, provided that you do not charge any fee for such copies and further provided that each copy contains this Copyright Notice, whether distributed in print or electronically. All guides are released with an ASLv2 license for the code, and Creative Commons license for the writing. 
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
