<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <title>Build a Grails 3 application with the Vaadin 8 Framework</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />
        <link rel="stylesheet" href="../css/guide.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />        
        <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8" />

        <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.13/clipboard.min.js"></script>
    <script type="text/javascript">
function addJsClass(el) {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>

        <link rel="stylesheet" type="text/css" href="../css/font-awesome.min.css" />        
        <link rel="stylesheet" type="text/css" href="../css/navbar.css" />
        <link rel="stylesheet" type="text/css" href="../css/stMenu.css" />      

    </head>

    <body class="body" onload="addJsClass();">

    <a href="https://github.com/grails/grails-core" target="_blank">
      <div id="fork-me">
        <p>Fork me on Github</p>
      </div>
    </a>
    <div id="st-container" class="st-container st-effect-9">
      <nav class="st-menu st-effect-9" id="menu-12">
        <h2 class="icon icon-lab">Socialize</h2>
        <ul>
          <li><a href="http://grails.org/mailing-lists.html" class="icon"><span class="fa fa-envelope"></span> Discuss on the Mailing List</a></li>
          <li><a href="http://slack-signup.grails.org" class="icon"><span class="fa fa-slack"></span> Discuss on Slack</a></li>
          <li><a href="https://twitter.com/grailsframework" class="icon"><span class="fa fa-twitter"></span> Grails on Twitter</a></li>
          <li><a href="http://grails.org/events.html" class="icon"><span class="fa fa-calendar"></span> Events and conferences</a></li>
          <li><a href="https://github.com/grails/grails-core" class="icon"><span class="fa fa-github"></span> Source code on GitHub</a></li>
          <li><a href="http://grails.org/contribute.html#reporting-issues" class="icon"><span class="fa fa-bug"></span> Report issues on Github</a></li>
          <li><a href="http://stackoverflow.com/questions/tagged/grails" class="icon"><span class="fa fa-stack-overflow"></span> Stack Overflow questions</a></li>
        </ul>
      </nav>
      <div class="st-pusher">
        <div class="st-content">
          <div class="st-content">
            <div class="grailsnavbar grailsnavbar-default">
              <div class="grailsnavbar-container">
                <div class="grailsnavbar-header">
                  <a class="grailsnavbar-brand" href="index.html"><i class="fa grails-icon"><img src="../img/grails-cupsonly-logo-white.svg"></i> Grails</a>
                </div>
                <a id="nav-icon" href="javascript:toggleNavIcon();">
                  <span></span>
                  <span></span>
                  <span></span>
                </a>
                <div class="grailsnavbar-collapse collapse">
                  <ul id="grailsnavbar-nav" class="grailsnavbar-nav grailsnavbar-right closemobile">
                    <li><a href="http://grails.org/learn.html">Learn</a></li>
                    <li><a href="http://guides.grails.org">Guides</a></li>
                    <li><a href="http://grails.org/documentation.html">Documentation</a></li>
                    <li><a href="http://grails.org/download.html">Download</a></li>
                    <li><a href="http://plugins.grails.org">Plugins</a></li>
                    <li><a href="http://grails.org/community.html">Community</a></li>
                    <li><a href="http://grails.org/support.html">Support</a></li>
                    <li><a data-effect="st-effect-9" class="st-trigger" href="#">Socialize</a></li>
                    <li><a href="http://grails.org/search.html"><i class="fa fa-search"></i></a></li>
                  </ul>
                </div>
              </div>
            </div>
            <!-- CONTENT -->
<table id="colset" border="0" cellpadding="0" cellspacing="0">
                                <tr>
                                    <td id="col1">
                                        <div id="main" class="corner-all">

                                            <div class="project">
                                                <h1>Build a Grails 3 application with the Vaadin 8 Framework</h1>
                                                <p></p>
                                                <p>Learn how to build a Grails 3 application with the Vaadin 8 Framework</p>
                                                <p><strong>Authors:</strong> Ben Rhine</p>
                                                <p><strong>Grails Version:</strong> 3.2.11</p>

                                            </div>

                                            

<h1 id="gettingStarted">1 Getting Started</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/vaadin-grails/edit/master/src/main/docs/guide/gettingStarted.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>In this guide you are going to build a Grails 3 application with the Vaadin 8 Framework.</p>
</div>


<h2 id="requirements">1.1 What you will need</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/vaadin-grails/edit/master/src/main/docs/guide/requirements.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>To complete this guide, you will need the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Some time on your hands</p>
</li>
<li>
<p>A decent text editor or IDE</p>
</li>
<li>
<p>JDK 1.7 or greater installed with <code>JAVA_HOME</code> configured appropriately</p>
</li>
</ul>
</div>


<h2 id="howto">1.2 How to complete the guide</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/vaadin-grails/edit/master/src/main/docs/guide/howto.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>To get started do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/grails-guides/vaadin-grails/archive/master.zip">Download</a> and unzip the source</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Clone the <a href="https://git-scm.com/">Git</a> repository:<br>
<code>git clone <a href="https://github.com/grails-guides/vaadin-grails.git" class="bare">https://github.com/grails-guides/vaadin-grails.git</a></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Grails guides repositories contain two folders:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>initial</code>  Initial project. Often a simple Grails app with additional some code to give you a head-start.</p>
</li>
<li>
<p><code>complete</code> A completed example. It is the result of working through the steps presented by the guide and applying those changes to the <code>initial</code> folder.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To complete the guide, go to the <code>initial</code> folder</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cd</code> into <code>grails-guides/vaadin-grails/initial</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and follow the instructions in the next sections.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can go right to the <strong>completed example</strong> if you <code>cd</code> into <code>grails-guides/vaadin-grails/complete</code>
</td>
</tr>
</table>
</div>


<h2 id="profile">1.3 Vaadin 8 Grails 3 Profile</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/vaadin-grails/edit/master/src/main/docs/guide/profile.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>The <code>initial</code> directory of this project was created with the command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">grails create-app demo --profile me.przepiora.vaadin-grails:web-vaadin8:0.2</code></pre>
</div>
</div>
<div class="paragraph">
<p>We supply to the <code>create-app</code> command the <a href="https://github.com/macprzepiora/web-vaadin8">Vaadin 8 Grails 3 Profile</a>'s coordinates.</p>
</div>
<div class="paragraph">
<p>With the use of <a href="http://docs.grails.org/latest/guide/single.html#profiles">application profiles</a>, Grails allows you to build modern web applications. There are profiles to facilitate the construction of REST APIs or Web applications with a Javascript front-end (Angular, REACT) or Vaadin apps.</p>
</div>


<h1 id="aboutVaadin">2 About Vaadin</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/vaadin-grails/edit/master/src/main/docs/guide/aboutVaadin.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p><a href="https://vaadin.com/framework">Vaadin</a> is Java Web UI Framework for Business Applications.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>With Vaadin Framework, you&#8217;ll use a familiar component based approach to build awesome single page web apps faster than with any other UI framework. Forget complex web technologies and just use Java or any other JVM language. Only a browser is needed to access your application - no plugins required.</p>
</div>
</blockquote>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/charts-on-mobile-and-desktop.png" alt="charts on mobile and desktop">
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The Vaadin 8 Grails profile allows you mix Vaadin endpoints and traditional Grails endpoints.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>On the one hand, we are going to have endpoints which will be handled by Grails Controllers. They will render HTML, JSON or XML using
<a href="http://gsp.grails.org">GSP</a> or <a href="http://views.grails.org">Grails Views</a>.</p>
</div>
<div class="paragraph">
<p>On the other hand, we are going to have Vaadin endpoints. We will develop the UI using Java or Groovy, and we will connect to the Grails service layer directly.</p>
</div>
<div class="paragraph">
<p>If you require additional information on Vaadin, please check out the official documentation
<a href="https://vaadin.com/docs/-/part/framework/introduction/intro-overview.html">here</a>. Additionally,
you may find a fair number of examples in an older version of Vaadin, and
<a href="https://vaadin.com/framework/whatsnew">this</a> page gives a good explanation of how some of these
features have been updated in Vaadin 8.</p>
</div>


<h1 id="runningTheApp">3 Running the Application</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/vaadin-grails/edit/master/src/main/docs/guide/runningTheApp.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>At this point a test run is suggested just to make sure everything is functioning properly.</p>
</div>
<div class="paragraph">
<p>To run the application first</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ cd initial/</code></pre>
</div>
</div>
<div class="paragraph">
<p>To launch the application, run the following command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ ./gradlew bootRun</code></pre>
</div>
</div>
<div class="paragraph">
<p>If everything is good to go this will start up the Grails application,
which will be running on <code><a href="http://localhost:8080" class="bare">http://localhost:8080</a></code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/grailsDefault.png" alt="grailsDefault">
</div>
</div>
<div class="paragraph">
<p>To see Vaadin in action navigate to <code><a href="http://localhost:8080/vaadinui" class="bare">http://localhost:8080/vaadinui</a></code> instead.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/vaadinDefault.png" alt="vaadinDefault">
</div>
</div>


<h1 id="writingTheApp">4 Writing the Application</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/vaadin-grails/edit/master/src/main/docs/guide/writingTheApp.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>





<h2 id="creatingTheDomain">4.1 Creating the domain</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/vaadin-grails/edit/master/src/main/docs/guide/creatingTheDomain.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Lets start by creating our domain model for the application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">  $ grails create-domain-class demo.Driver
  $ grails create-domain-class demo.Make
  $ grails create-domain-class demo.Model
  $ grails create-domain-class demo.User
  $ grails create-domain-class demo.Vehicle</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let’s edit our domain classes under grails-app/domain/demo/.
We’ll add some properties and the three following annotations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@GrailsCompileStatic</code> - Code that is marked with <code>GrailsCompileStatic</code> will all be statically compiled except for Grails specific interactions that cannot be statically compiled but that GrailsCompileStatic can identify as permissible for dynamic dispatch. These include things like invoking dynamic finders and DSL code in configuration blocks like constraints and mapping closures in domain classes.</p>
</li>
<li>
<p><code>@EqualsAndHashCode</code> - Auto generates equals and hashCode methods</p>
</li>
<li>
<p><code>@ToString</code> - Auto generates toString method</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">/grails-app/domain/demo/Make.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">grails.compiler.GrailsCompileStatic</span>
<span class="keyword">import</span> <span class="include">groovy.transform.EqualsAndHashCode</span>
<span class="keyword">import</span> <span class="include">groovy.transform.ToString</span>

<span class="annotation">@GrailsCompileStatic</span>
<span class="annotation">@EqualsAndHashCode</span>(includes=[<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>])
<span class="annotation">@ToString</span>(includes=[<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>], includeNames=<span class="predefined-constant">true</span>, includePackage=<span class="predefined-constant">false</span>)
<span class="type">class</span> <span class="class">Make</span> {

    <span class="predefined-type">String</span> name

    <span class="directive">static</span> constraints = {
            name <span class="key">nullable</span>: <span class="predefined-constant">false</span>
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">/grails-app/domain/demo/Model.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">grails.compiler.GrailsCompileStatic</span>
<span class="keyword">import</span> <span class="include">groovy.transform.EqualsAndHashCode</span>
<span class="keyword">import</span> <span class="include">groovy.transform.ToString</span>

<span class="annotation">@GrailsCompileStatic</span>
<span class="annotation">@EqualsAndHashCode</span>(includes=[<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>])
<span class="annotation">@ToString</span>(includes=[<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>], includeNames=<span class="predefined-constant">true</span>, includePackage=<span class="predefined-constant">false</span>)
<span class="type">class</span> <span class="class">Model</span> {

    <span class="predefined-type">String</span> name

    <span class="directive">static</span> constraints = {
            name <span class="key">nullable</span>: <span class="predefined-constant">false</span>
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">/grails-app/domain/demo/Vehicle.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">grails.compiler.GrailsCompileStatic</span>
<span class="keyword">import</span> <span class="include">groovy.transform.EqualsAndHashCode</span>
<span class="keyword">import</span> <span class="include">groovy.transform.ToString</span>

<span class="annotation">@GrailsCompileStatic</span>
<span class="annotation">@EqualsAndHashCode</span>(includes=[<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">make</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">model</span><span class="delimiter">'</span></span>])
<span class="annotation">@ToString</span>(includes=[<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">make</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">model</span><span class="delimiter">'</span></span>], includeNames=<span class="predefined-constant">true</span>, includePackage=<span class="predefined-constant">false</span>)
<span class="type">class</span> <span class="class">Vehicle</span> {
    <span class="predefined-type">String</span> name
    Make make
    Model model

    <span class="directive">static</span> belongsTo = [<span class="key">driver</span>: <span class="predefined-type">Driver</span>]

    <span class="directive">static</span> mapping = {
        name <span class="key">nullable</span>: <span class="predefined-constant">false</span>
    }

    <span class="directive">static</span> constraints = {
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is a bit more to our <code>Driver.groovy</code> than meets the eye versus the first 3 classes. That&#8217;s
because we are actually extending our `User.groovy class with driver. This will grant us
some extra flexibility in the future as we grow our application.</p>
</div>
<div class="listingblock">
<div class="title">/grails-app/domain/demo/Driver.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">grails.compiler.GrailsCompileStatic</span>
<span class="keyword">import</span> <span class="include">groovy.transform.EqualsAndHashCode</span>
<span class="keyword">import</span> <span class="include">groovy.transform.ToString</span>

<span class="annotation">@GrailsCompileStatic</span>
<span class="annotation">@EqualsAndHashCode</span>(includes=[<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>])
<span class="annotation">@ToString</span>(includes=[<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>], includeNames=<span class="predefined-constant">true</span>, includePackage=<span class="predefined-constant">false</span>)
<span class="type">class</span> <span class="class">Driver</span> <span class="directive">extends</span> User {

    <span class="predefined-type">String</span> name

    <span class="directive">static</span> hasMany = [ <span class="key">vehicles</span>: Vehicle ]

    <span class="directive">static</span> constraints = {
        vehicles <span class="key">nullable</span>: <span class="predefined-constant">true</span>
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">/grails-app/domain/demo/User.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">groovy.transform.EqualsAndHashCode</span>
<span class="keyword">import</span> <span class="include">groovy.transform.ToString</span>
<span class="keyword">import</span> <span class="include">grails.compiler.GrailsCompileStatic</span>

<span class="annotation">@GrailsCompileStatic</span>
<span class="annotation">@EqualsAndHashCode</span>(includes=<span class="string"><span class="delimiter">'</span><span class="content">username</span><span class="delimiter">'</span></span>)
<span class="annotation">@ToString</span>(includes=<span class="string"><span class="delimiter">'</span><span class="content">username</span><span class="delimiter">'</span></span>, includeNames=<span class="predefined-constant">true</span>, includePackage=<span class="predefined-constant">false</span>)
<span class="type">class</span> <span class="class">User</span> <span class="directive">implements</span> <span class="predefined-type">Serializable</span> {
    <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="type">long</span> serialVersionUID = <span class="integer">1</span>

    <span class="predefined-type">String</span> username
    <span class="predefined-type">String</span> password
    <span class="type">boolean</span> enabled = <span class="predefined-constant">true</span>
    <span class="type">boolean</span> accountExpired
    <span class="type">boolean</span> accountLocked
    <span class="type">boolean</span> passwordExpired

    <span class="directive">static</span> constraints = {
        password <span class="key">nullable</span>: <span class="predefined-constant">false</span>, <span class="key">blank</span>: <span class="predefined-constant">false</span>, <span class="key">password</span>: <span class="predefined-constant">true</span>
        username <span class="key">nullable</span>: <span class="predefined-constant">false</span>, <span class="key">blank</span>: <span class="predefined-constant">false</span>, <span class="key">unique</span>: <span class="predefined-constant">true</span>
    }

    <span class="directive">static</span> mapping = {
        password <span class="key">column</span>: <span class="string"><span class="delimiter">'</span><span class="content">`password`</span><span class="delimiter">'</span></span>
    }
}</code></pre>
</div>
</div>


<h2 id="creatingTestData">4.2 Bootstrap Data</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/vaadin-grails/edit/master/src/main/docs/guide/creatingTestData.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Now that our domain is in place, lets preload some data to work with.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/demo/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="type">class</span> <span class="class">BootStrap</span> {

    <span class="keyword">def</span> init = { servletContext -&gt;
        println <span class="string"><span class="delimiter">&quot;</span><span class="content">Loading database...</span><span class="delimiter">&quot;</span></span>
        <span class="directive">final</span> driver1 = <span class="keyword">new</span> <span class="predefined-type">Driver</span>(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Susan</span><span class="delimiter">&quot;</span></span>, <span class="key">username</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">susan</span><span class="delimiter">&quot;</span></span>, <span class="key">password</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">password1</span><span class="delimiter">&quot;</span></span>).save()
        <span class="directive">final</span> driver2 = <span class="keyword">new</span> <span class="predefined-type">Driver</span>(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Pedro</span><span class="delimiter">&quot;</span></span>, <span class="key">username</span>:  <span class="string"><span class="delimiter">&quot;</span><span class="content">pedro</span><span class="delimiter">&quot;</span></span>, <span class="key">password</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">password2</span><span class="delimiter">&quot;</span></span>).save()

        <span class="directive">final</span> nissan = <span class="keyword">new</span> Make(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Nissan</span><span class="delimiter">&quot;</span></span>).save()
        <span class="directive">final</span> ford = <span class="keyword">new</span> Make(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Ford</span><span class="delimiter">&quot;</span></span>).save()

        <span class="directive">final</span> titan = <span class="keyword">new</span> Model(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Titan</span><span class="delimiter">&quot;</span></span>).save()
        <span class="directive">final</span> leaf = <span class="keyword">new</span> Model(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Leaf</span><span class="delimiter">&quot;</span></span>).save()
        <span class="directive">final</span> windstar = <span class="keyword">new</span> Model(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Windstar</span><span class="delimiter">&quot;</span></span>).save()

        <span class="keyword">new</span> Vehicle(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Pickup</span><span class="delimiter">&quot;</span></span>, <span class="key">driver</span>: driver1, <span class="key">make</span>: nissan, <span class="key">model</span>: titan).save()
        <span class="keyword">new</span> Vehicle(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Economy</span><span class="delimiter">&quot;</span></span>, <span class="key">driver</span>: driver1, <span class="key">make</span>: nissan, <span class="key">model</span>: leaf).save()
        <span class="keyword">new</span> Vehicle(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Minivan</span><span class="delimiter">&quot;</span></span>, <span class="key">driver</span>: driver2, <span class="key">make</span>: ford, <span class="key">model</span>: windstar).save()
    }
    <span class="keyword">def</span> destroy = {
    }
}</code></pre>
</div>
</div>


<h2 id="creatingTheServices">4.3 Creating the service layer</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/vaadin-grails/edit/master/src/main/docs/guide/creatingTheServices.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Next lets create our service layer for our application so Grails and Vaadin can share
resources.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">  $ grails create-service demo.DriverService
  $ grails create-service demo.MakeService
  $ grails create-service demo.ModelService
  $ grails create-service demo.VehicleService</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let’s edit our service classes under grails-app/services/demo/.
We’ll add a <code>listAll()</code> method to all of the classes. This method will have the following additional annotation.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@Transactional(readOnly = true)</code> - good practice to have on methods that only return data</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">/grails-app/services/demo/DriverService.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">grails.transaction.Transactional</span>
<span class="keyword">import</span> <span class="include">groovy.transform.CompileStatic</span>

<span class="annotation">@CompileStatic</span>
<span class="annotation">@Transactional</span>
<span class="type">class</span> <span class="class">DriverService</span> {

    <span class="annotation">@Transactional</span>(readOnly = <span class="predefined-constant">true</span>)
    <span class="predefined-type">List</span>&lt;<span class="predefined-type">Driver</span>&gt; listAll() {
        <span class="predefined-type">Driver</span>.where { }.list()
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">/grails-app/services/demo/MakeService.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">grails.transaction.Transactional</span>
<span class="keyword">import</span> <span class="include">groovy.transform.CompileStatic</span>

<span class="annotation">@CompileStatic</span>
<span class="annotation">@Transactional</span>
<span class="type">class</span> <span class="class">MakeService</span> {

    <span class="annotation">@Transactional</span>(readOnly = <span class="predefined-constant">true</span>)
    <span class="predefined-type">List</span>&lt;Make&gt; listAll() {
        Make.where { }.list()
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">/grails-app/services/demo/ModelService.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">grails.transaction.Transactional</span>
<span class="keyword">import</span> <span class="include">groovy.transform.CompileStatic</span>

<span class="annotation">@CompileStatic</span>
<span class="annotation">@Transactional</span>
<span class="type">class</span> <span class="class">ModelService</span> {

    <span class="annotation">@Transactional</span>(readOnly = <span class="predefined-constant">true</span>)
    <span class="predefined-type">List</span>&lt;Model&gt; listAll() {
        Model.where { }.list()
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Our <code>VehicleService.groovy</code> has an additional <code>save()</code> method so that we can add new data to our application.</p>
</div>
<div class="listingblock">
<div class="title">/grails-app/services/demo/VehicleService.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">grails.transaction.Transactional</span>
<span class="keyword">import</span> <span class="include">groovy.transform.CompileStatic</span>

<span class="annotation">@CompileStatic</span>
<span class="annotation">@Transactional</span>
<span class="type">class</span> <span class="class">VehicleService</span> {

    <span class="keyword">def</span> <span class="function">save</span>(<span class="directive">final</span> Vehicle vehicle) {
        vehicle.save(<span class="key">failOnError</span>: <span class="predefined-constant">true</span>)
    }

    <span class="annotation">@Transactional</span>(readOnly = <span class="predefined-constant">true</span>)
    <span class="predefined-type">List</span>&lt;Vehicle&gt; listAll(<span class="type">boolean</span> lazyFetch = <span class="predefined-constant">true</span>) {
        <span class="keyword">if</span> ( !lazyFetch ) {
            <span class="keyword">return</span> Vehicle.where {}
                    .join(<span class="string"><span class="delimiter">'</span><span class="content">make</span><span class="delimiter">'</span></span>)
                    .join(<span class="string"><span class="delimiter">'</span><span class="content">model</span><span class="delimiter">'</span></span>)
                    .join(<span class="string"><span class="delimiter">'</span><span class="content">driver</span><span class="delimiter">'</span></span>)
                    .list()
        }
        Vehicle.where { }.list()
    }
}</code></pre>
</div>
</div>


<h2 id="creatingTheControllers">4.4 Creating a controller</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/vaadin-grails/edit/master/src/main/docs/guide/creatingTheControllers.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>While completely unnecessary for Vaadin we want to demonstrate that there is no conflict
between Grails controllers and the Vaadin Framework.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">  $ grails create-controller demo.GarageController</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let’s edit our controller under grails-app/controllers/demo/.
We will import one of our services, update our index method, and add the following annotation.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@GrailsCompileStatic</code> - Code that is marked with <code>GrailsCompileStatic</code> will all be statically compiled except for Grails specific interactions that cannot be statically compiled but that GrailsCompileStatic can identify as permissible for dynamic dispatch. These include things like invoking dynamic finders and DSL code in configuration blocks like constraints and mapping closures in domain classes.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">/grails-app/controllers/demo/GarageController.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">grails.converters.JSON</span>
<span class="keyword">import</span> <span class="include">groovy.transform.CompileStatic</span>

<span class="annotation">@CompileStatic</span>
<span class="type">class</span> <span class="class">GarageController</span> {

    VehicleService vehicleService <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="keyword">def</span> <span class="function">index</span>() { <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="directive">final</span> <span class="predefined-type">List</span>&lt;Vehicle&gt; vehicleList = vehicleService.listAll()

        render vehicleList <span class="keyword">as</span> JSON
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declaring our service</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>index()</code> calls our service and renders the output as JSON</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>At this point lets make sure everything is working properly and run <a href="#runningTheApp">[runningTheApp]</a>
the application.</p>
</div>
<div class="paragraph">
<p>Now we can exercise the API using cURL or another API tool.</p>
</div>
<div class="paragraph">
<p>Make a GET request to /garage to get a list of Vehicles:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">  $ curl -X &quot;GET&quot; &quot;http://localhost:8080/garage&quot;

    [{&quot;id&quot;:1,&quot;driver&quot;:{&quot;id&quot;:1},&quot;make&quot;:{&quot;id&quot;:1},&quot;model&quot;:{&quot;id&quot;:1},&quot;name&quot;:&quot;Pickup&quot;},
     {&quot;id&quot;:2,&quot;driver&quot;:{&quot;id&quot;:1},&quot;make&quot;:{&quot;id&quot;:1},&quot;model&quot;:{&quot;id&quot;:2},&quot;name&quot;:&quot;Economy&quot;},
     {&quot;id&quot;:3,&quot;driver&quot;:{&quot;id&quot;:2},&quot;make&quot;:{&quot;id&quot;:2},&quot;model&quot;:{&quot;id&quot;:3},&quot;name&quot;:&quot;Minivan&quot;}]</code></pre>
</div>
</div>
<div class="paragraph">
<p>If data comes back everything is setup and connected properly at this point and we have
verified that we have some test data. Now lets look at how to attach Vaadin to Grails</p>
</div>


<h2 id="addingToVaadin">4.5 Vaadin</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/vaadin-grails/edit/master/src/main/docs/guide/addingToVaadin.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Finally time to start adding Vaadin code to our application!</p>
</div>
<div class="paragraph">
<p>Consider <code>grails-app/vaadin/demo/VaadinGrailsUI.groovy</code> to be your Vaadin
controller / dispatcher as it will help you understand the Vaadin flow. Our <code>init()</code>
method is the applications entry point to Vaadin itself, this is your top level view
essentially. From here you can setup navigation and other whole app view components.</p>
</div>
<div class="paragraph">
<p>Our <code>VaadinGrailsUI.groovy</code> as it currently is, is great for a
single page web application but its not the most flexible if we want to add navigation
components or other pages later on. With this in mind we are going to make it a bit more
flexible using views. Using views is also beneficial in helping keep our Vaadin frontend
well organized.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For more information on views and navigation with Vaadin look
<a href="https://vaadin.github.io/spring-tutorial/#_views_and_navigation_with_vaadin_spring">here</a>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">/grails-app/vaadin/demo/VaadinGrailsUI.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">com.vaadin.annotations.Title</span>
<span class="keyword">import</span> <span class="include">com.vaadin.navigator.View</span>
<span class="keyword">import</span> <span class="include">com.vaadin.navigator.ViewDisplay</span>
<span class="keyword">import</span> <span class="include">com.vaadin.server.VaadinRequest</span>
<span class="keyword">import</span> <span class="include">com.vaadin.annotations.Theme</span>
<span class="keyword">import</span> <span class="include">com.vaadin.spring.annotation.SpringUI</span>
<span class="keyword">import</span> <span class="include">com.vaadin.spring.annotation.SpringViewDisplay</span>
<span class="keyword">import</span> <span class="include">com.vaadin.ui.Component</span>
<span class="keyword">import</span> <span class="include">com.vaadin.ui.Label</span>
<span class="keyword">import</span> <span class="include">com.vaadin.ui.Panel</span>
<span class="keyword">import</span> <span class="include">com.vaadin.ui.UI</span>
<span class="keyword">import</span> <span class="include">com.vaadin.ui.VerticalLayout</span>
<span class="keyword">import</span> <span class="include">groovy.transform.CompileStatic</span>

<span class="annotation">@CompileStatic</span>
<span class="annotation">@SpringUI</span>(path=<span class="string"><span class="delimiter">&quot;</span><span class="content">/vaadinui</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Title</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Vaadin Grails</span><span class="delimiter">&quot;</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
<span class="annotation">@Theme</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">vaadin-grails-theme</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@SpringViewDisplay</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="type">class</span> <span class="class">VaadinGrailsUI</span> <span class="directive">extends</span> UI <span class="directive">implements</span> ViewDisplay { <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="directive">private</span> <span class="predefined-type">Panel</span> springViewDisplay <i class="conum" data-value="4"></i><b>(4)</b>

    <span class="comment">/** Where a line is matters, it can change the position of an element. */</span>
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> init(VaadinRequest request) { <i class="conum" data-value="5"></i><b>(5)</b>
        <span class="directive">final</span> VerticalLayout root = <span class="keyword">new</span> VerticalLayout()
        root.setSizeFull()
        setContent(root)
        springViewDisplay = <span class="keyword">new</span> <span class="predefined-type">Panel</span>()
        springViewDisplay.setSizeFull()

        root.addComponent(buildHeader())
        root.addComponent(springViewDisplay)
        root.setExpandRatio(springViewDisplay, <span class="float">1.0f</span>)
    }

    <span class="directive">static</span> <span class="directive">private</span> <span class="predefined-type">Label</span> buildHeader() { <i class="conum" data-value="6"></i><b>(6)</b>
        <span class="directive">final</span> <span class="predefined-type">Label</span> mainTitle = <span class="keyword">new</span> <span class="predefined-type">Label</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Welcome to the Garage</span><span class="delimiter">&quot;</span></span>)
        mainTitle
    }

    <span class="annotation">@Override</span>
    <span class="type">void</span> showView(<span class="directive">final</span> <span class="predefined-type">View</span> view) { <i class="conum" data-value="7"></i><b>(7)</b>
        springViewDisplay.setContent((<span class="predefined-type">Component</span>) view)
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We add the <code>@Title</code> annotation to give our window / tab a nice name</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Add <code>@SpringViewDisplay</code> so we can use views</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Along with and <code>implements ViewDisplay</code> to our class</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Next create an additional panel for our UI</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Initial entry point into our Vaadin View</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Helper method for building our header</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Additional function required for using views; dynamically controls setting our view components</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The order in which you add components to the layout, can determin their position within the layout.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>init()</code> can get quite large quite fast so it is best to break out UI components
into their own methods like <code>buildHeader()</code> to keep your files clear and concise.
</td>
</tr>
</table>
</div>


<h2 id="addingView">4.6 Adding your view</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/vaadin-grails/edit/master/src/main/docs/guide/addingView.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Now to add the view which is the bulk of our Vaadin code. Create a new file located in
<code>grails-app/vaadin/demo</code> called <code>GarageView.groovy</code>.</p>
</div>
<div class="paragraph">
<p>Next make the necessary updates.</p>
</div>
<div class="listingblock">
<div class="title">/grails-app/vaadin/demo/GarageView.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">com.vaadin.data.HasValue</span>
<span class="keyword">import</span> <span class="include">com.vaadin.data.ValueProvider</span>
<span class="keyword">import</span> <span class="include">com.vaadin.event.selection.SelectionEvent</span>
<span class="keyword">import</span> <span class="include">com.vaadin.event.selection.SelectionListener</span>
<span class="keyword">import</span> <span class="include">com.vaadin.event.selection.SingleSelectionEvent</span>
<span class="keyword">import</span> <span class="include">com.vaadin.event.selection.SingleSelectionListener</span>
<span class="keyword">import</span> <span class="include">com.vaadin.navigator.View</span>
<span class="keyword">import</span> <span class="include">com.vaadin.navigator.ViewChangeListener</span>
<span class="keyword">import</span> <span class="include">com.vaadin.spring.annotation.SpringView</span>
<span class="keyword">import</span> <span class="include">com.vaadin.ui.Button</span>
<span class="keyword">import</span> <span class="include">com.vaadin.ui.ComboBox</span>
<span class="keyword">import</span> <span class="include">com.vaadin.ui.Grid</span>
<span class="keyword">import</span> <span class="include">com.vaadin.ui.HorizontalLayout</span>
<span class="keyword">import</span> <span class="include">com.vaadin.ui.ItemCaptionGenerator</span>
<span class="keyword">import</span> <span class="include">com.vaadin.ui.Label</span>
<span class="keyword">import</span> <span class="include">com.vaadin.ui.TextField</span>
<span class="keyword">import</span> <span class="include">com.vaadin.ui.VerticalLayout</span>
<span class="keyword">import</span> <span class="include">groovy.util.logging.Slf4j</span>
<span class="keyword">import</span> <span class="include">org.springframework.beans.factory.annotation.Autowired</span>
<span class="keyword">import</span> <span class="include">javax.annotation.PostConstruct</span>
<span class="keyword">import</span> <span class="include">groovy.transform.CompileStatic</span>

<span class="annotation">@Slf4j</span>
<span class="annotation">@CompileStatic</span>
<span class="annotation">@SpringView</span>(name = GarageView.VIEW_NAME) <i class="conum" data-value="1"></i><b>(1)</b>
<span class="type">class</span> <span class="class">GarageView</span> <span class="directive">extends</span> VerticalLayout <span class="directive">implements</span> <span class="predefined-type">View</span> { <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> VIEW_NAME = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <i class="conum" data-value="3"></i><b>(3)</b>

    <span class="annotation">@Autowired</span>  <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="directive">private</span> DriverService driverService

    <span class="annotation">@Autowired</span>
    <span class="directive">private</span> MakeService makeService

    <span class="annotation">@Autowired</span>

    <span class="directive">private</span> ModelService modelService

    <span class="annotation">@Autowired</span>
    <span class="directive">private</span> VehicleService vehicleService

    <span class="directive">private</span> Vehicle vehicle = <span class="keyword">new</span> Vehicle()

    <span class="annotation">@PostConstruct</span> <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="type">void</span> init() {
        <span class="comment">/** Display Row One: (Add panel title) ---------------------------------------------------------------------- */</span>
        <span class="directive">final</span> HorizontalLayout titleRow = <span class="keyword">new</span> HorizontalLayout()
        titleRow.setWidth(<span class="string"><span class="delimiter">&quot;</span><span class="content">100%</span><span class="delimiter">&quot;</span></span>)
        addComponent(titleRow)

        <span class="directive">final</span> <span class="predefined-type">Label</span> title = <span class="keyword">new</span> <span class="predefined-type">Label</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Add a Vehicle:</span><span class="delimiter">&quot;</span></span>)
        titleRow.addComponent(title)
        titleRow.setExpandRatio(title, <span class="float">1.0f</span>) <span class="comment">// Expand</span>

        <span class="comment">/** Display Row Two: (Build data input) --------------------------------------------------------------------- */</span>
        <span class="directive">final</span> HorizontalLayout inputRow = <span class="keyword">new</span> HorizontalLayout()
        inputRow.setWidth(<span class="string"><span class="delimiter">&quot;</span><span class="content">100%</span><span class="delimiter">&quot;</span></span>)
        addComponent(inputRow)

        <span class="comment">// Build data input constructs</span>
        <span class="directive">final</span> <span class="predefined-type">TextField</span> vehicleName = <span class="local-variable">this</span>.buildNewVehicleName()
        <span class="directive">final</span> ComboBox&lt;Make&gt; vehicleMake = <span class="local-variable">this</span>.buildMakeComponent()
        <span class="directive">final</span> ComboBox&lt;Model&gt; vehicleModel = <span class="local-variable">this</span>.buildModelComponent()
        <span class="directive">final</span> ComboBox&lt;<span class="predefined-type">Driver</span>&gt; vehicleDriver = <span class="local-variable">this</span>.buildDriverComponent()
        <span class="directive">final</span> <span class="predefined-type">Button</span> submitBtn = <span class="local-variable">this</span>.buildSubmitButton()

        <span class="comment">// Add listeners to capture data change</span>
        <span class="comment">//tag::listeners[]</span>
        vehicleName.addValueChangeListener(<span class="keyword">new</span> UpdateVehicleValueChangeListener(<span class="string"><span class="delimiter">'</span><span class="content">NAME</span><span class="delimiter">'</span></span>))
        vehicleMake.addSelectionListener(<span class="keyword">new</span> UpdateVehicleComboBoxSelectionLister(<span class="string"><span class="delimiter">'</span><span class="content">MAKE</span><span class="delimiter">'</span></span>))
        vehicleModel.addSelectionListener(<span class="keyword">new</span> UpdateVehicleComboBoxSelectionLister(<span class="string"><span class="delimiter">'</span><span class="content">MODEL</span><span class="delimiter">'</span></span>))
        vehicleDriver.addSelectionListener(<span class="keyword">new</span> UpdateVehicleComboBoxSelectionLister(<span class="string"><span class="delimiter">'</span><span class="content">DRIVER</span><span class="delimiter">'</span></span>))
        submitBtn.addClickListener { event -&gt;
            <span class="local-variable">this</span>.submit()
        }
        <span class="comment">//end::listeners[]</span>

        <span class="comment">// Add data constructs to row</span>
        [vehicleName, vehicleMake, vehicleModel, vehicleDriver, submitBtn].each {
            inputRow.addComponent(<span class="local-variable">it</span>)
        }

        <span class="comment">/** Display Row Three: (Display all vehicles in database) --------------------------------------------------- */</span>
        <span class="directive">final</span> HorizontalLayout dataDisplayRow = <span class="keyword">new</span> HorizontalLayout()
        dataDisplayRow.setWidth(<span class="string"><span class="delimiter">&quot;</span><span class="content">100%</span><span class="delimiter">&quot;</span></span>)
        addComponent(dataDisplayRow)
        dataDisplayRow.addComponent(<span class="local-variable">this</span>.buildVehicleComponent())
    }

    <span class="type">class</span> <span class="class">UpdateVehicleValueChangeListener</span> <span class="directive">implements</span> HasValue.ValueChangeListener {
        <span class="predefined-type">String</span> eventType

        UpdateVehicleValueChangeListener(<span class="predefined-type">String</span> eventType) {
            <span class="local-variable">this</span>.eventType = eventType
        }

        <span class="annotation">@Override</span>
        <span class="type">void</span> valueChange(HasValue.ValueChangeEvent event) {
            updateVehicle(eventType, event.value)
        }
    }
    <span class="type">class</span> <span class="class">UpdateVehicleComboBoxSelectionLister</span> <span class="directive">implements</span> SingleSelectionListener {
        <span class="predefined-type">String</span> eventType

        UpdateVehicleComboBoxSelectionLister(<span class="predefined-type">String</span> eventType) {
            <span class="local-variable">this</span>.eventType = eventType
        }

        <span class="annotation">@Override</span>
        <span class="type">void</span> selectionChange(SingleSelectionEvent event) {
            updateVehicle(eventType, event.firstSelectedItem)
        }
    }

    <span class="annotation">@Override</span>
    <span class="type">void</span> enter(ViewChangeListener.ViewChangeEvent event) {
        <span class="comment">// This view is constructed in the init() method()</span>
    }

    <span class="comment">/** Private UI component builders ------------------------------------------------------------------------------- */</span>
    <span class="directive">static</span> <span class="directive">private</span> <span class="predefined-type">TextField</span> buildNewVehicleName() {
        <span class="directive">final</span> <span class="predefined-type">TextField</span> vehicleName = <span class="keyword">new</span> <span class="predefined-type">TextField</span>()
        vehicleName.setPlaceholder(<span class="string"><span class="delimiter">&quot;</span><span class="content">Enter a name...</span><span class="delimiter">&quot;</span></span>)

        vehicleName
    }

    <span class="directive">private</span> ComboBox&lt;Make&gt; buildMakeComponent() {
        <span class="directive">final</span> <span class="predefined-type">List</span>&lt;Make&gt; makes = makeService.listAll()

        <span class="directive">final</span> ComboBox&lt;Make&gt; select = <span class="keyword">new</span> ComboBox&lt;&gt;()
        select.setEmptySelectionAllowed(<span class="predefined-constant">false</span>)
        select.setPlaceholder(<span class="string"><span class="delimiter">&quot;</span><span class="content">Select a Make</span><span class="delimiter">&quot;</span></span>)
        select.setItemCaptionGenerator(<span class="keyword">new</span> CustomItemCaptionGenerator())
        select.setItems(makes)

        select
    }

    <span class="type">class</span> <span class="class">CustomItemCaptionGenerator</span> <span class="directive">implements</span> ItemCaptionGenerator {

        <span class="annotation">@Override</span>
        <span class="predefined-type">String</span> apply(<span class="predefined-type">Object</span> item) {
            <span class="keyword">if</span> (item <span class="keyword">instanceof</span> Make ) {
                <span class="keyword">return</span> (item <span class="keyword">as</span> Make).name
            }
            <span class="keyword">if</span> ( item <span class="keyword">instanceof</span> <span class="predefined-type">Driver</span> ) {
                <span class="keyword">return</span> (item <span class="keyword">as</span> <span class="predefined-type">Driver</span>).name
            }
            <span class="keyword">if</span> ( item <span class="keyword">instanceof</span> Model ) {
                <span class="keyword">return</span> (item <span class="keyword">as</span> Model).name
            }
            <span class="predefined-constant">null</span>
        }
    }

    <span class="directive">private</span> ComboBox&lt;Model&gt; buildModelComponent() {
        <span class="directive">final</span> <span class="predefined-type">List</span>&lt;Model&gt; models = modelService.listAll()

        <span class="directive">final</span> ComboBox&lt;Model&gt; select = <span class="keyword">new</span> ComboBox&lt;&gt;()
        select.setEmptySelectionAllowed(<span class="predefined-constant">false</span>)
        select.setPlaceholder(<span class="string"><span class="delimiter">&quot;</span><span class="content">Select a Model</span><span class="delimiter">&quot;</span></span>)
        select.setItemCaptionGenerator(<span class="keyword">new</span> CustomItemCaptionGenerator())
        select.setItems(models)

        select
    }

    <span class="directive">private</span> ComboBox&lt;<span class="predefined-type">Driver</span>&gt; buildDriverComponent() {
        <span class="directive">final</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">Driver</span>&gt; drivers = driverService.listAll()

        <span class="directive">final</span> ComboBox&lt;<span class="predefined-type">Driver</span>&gt; select = <span class="keyword">new</span> ComboBox&lt;&gt;()
        select.setEmptySelectionAllowed(<span class="predefined-constant">false</span>)
        select.setPlaceholder(<span class="string"><span class="delimiter">&quot;</span><span class="content">Select a Driver</span><span class="delimiter">&quot;</span></span>)
        select.setItemCaptionGenerator(<span class="keyword">new</span> CustomItemCaptionGenerator())
        select.setItems(drivers)

        select
    }

    <span class="directive">private</span> Grid buildVehicleComponent() {
        <span class="directive">final</span> <span class="predefined-type">List</span>&lt;Vehicle&gt; vehicles = vehicleService.listAll(<span class="predefined-constant">false</span>) <i class="conum" data-value="6"></i><b>(6)</b>
        <span class="directive">final</span> Grid grid = <span class="keyword">new</span> Grid&lt;&gt;()
        grid.setSizeFull()  <span class="comment">// ensures grid fills width</span>
        grid.setItems(vehicles)
        grid.addColumn(<span class="keyword">new</span> VehicleValueProvider(<span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>)).setCaption(<span class="string"><span class="delimiter">&quot;</span><span class="content">ID</span><span class="delimiter">&quot;</span></span>)
        grid.addColumn(<span class="keyword">new</span> VehicleValueProvider(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>)).setCaption(<span class="string"><span class="delimiter">&quot;</span><span class="content">Name</span><span class="delimiter">&quot;</span></span>)
        grid.addColumn(<span class="keyword">new</span> VehicleValueProvider(<span class="string"><span class="delimiter">'</span><span class="content">make.name</span><span class="delimiter">'</span></span>)).setCaption(<span class="string"><span class="delimiter">&quot;</span><span class="content">Make</span><span class="delimiter">&quot;</span></span>)
        grid.addColumn(<span class="keyword">new</span> VehicleValueProvider(<span class="string"><span class="delimiter">'</span><span class="content">model.name</span><span class="delimiter">'</span></span>)).setCaption(<span class="string"><span class="delimiter">&quot;</span><span class="content">Model</span><span class="delimiter">&quot;</span></span>)
        grid.addColumn(<span class="keyword">new</span> VehicleValueProvider(<span class="string"><span class="delimiter">'</span><span class="content">driver.name</span><span class="delimiter">'</span></span>)).setCaption(<span class="string"><span class="delimiter">&quot;</span><span class="content">Name</span><span class="delimiter">&quot;</span></span>)

        grid
    }

    <span class="type">class</span> <span class="class">VehicleValueProvider</span> <span class="directive">implements</span> ValueProvider {
        <span class="predefined-type">String</span> propertyName

        VehicleValueProvider(<span class="predefined-type">String</span> propertyName) {
            <span class="local-variable">this</span>.propertyName = propertyName
        }

        <span class="annotation">@Override</span>
        <span class="predefined-type">Object</span> apply(<span class="predefined-type">Object</span> o) {
            <span class="keyword">switch</span> (propertyName) {
                <span class="keyword">case</span> <span class="string"><span class="delimiter">'</span><span class="content">id</span><span class="delimiter">'</span></span>:
                    <span class="keyword">if</span> ( o <span class="keyword">instanceof</span> Vehicle) {
                        <span class="keyword">return</span> (o <span class="keyword">as</span> Vehicle).id
                    }
                    <span class="keyword">break</span>
                <span class="keyword">case</span> <span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>:
                    <span class="keyword">if</span> ( o <span class="keyword">instanceof</span> Vehicle) {
                        <span class="keyword">return</span> (o <span class="keyword">as</span> Vehicle).name
                    }
                    <span class="keyword">break</span>
                <span class="keyword">case</span> <span class="string"><span class="delimiter">'</span><span class="content">model.name</span><span class="delimiter">'</span></span>:
                    <span class="keyword">if</span> ( o <span class="keyword">instanceof</span> Vehicle) {
                        <span class="keyword">return</span> (o <span class="keyword">as</span> Vehicle).model.name
                    }
                    <span class="keyword">break</span>
                <span class="keyword">case</span> <span class="string"><span class="delimiter">'</span><span class="content">make.name</span><span class="delimiter">'</span></span>:
                    <span class="keyword">if</span> ( o <span class="keyword">instanceof</span> Vehicle) {
                        <span class="keyword">return</span> (o <span class="keyword">as</span> Vehicle).make.name
                    }
                    <span class="keyword">break</span>
                <span class="keyword">case</span> <span class="string"><span class="delimiter">'</span><span class="content">driver.name</span><span class="delimiter">'</span></span>:
                    <span class="keyword">if</span> ( o <span class="keyword">instanceof</span> Vehicle) {
                        <span class="keyword">return</span> (o <span class="keyword">as</span> Vehicle).driver.name
                    }
                    <span class="keyword">break</span>

            }
            <span class="predefined-constant">null</span>
        }
    }

    <span class="directive">static</span> <span class="directive">private</span> <span class="predefined-type">Button</span> buildSubmitButton() {
        <span class="directive">final</span> <span class="predefined-type">Button</span> submitBtn = <span class="keyword">new</span> <span class="predefined-type">Button</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Add to Garage</span><span class="delimiter">&quot;</span></span>)
        submitBtn.setStyleName(<span class="string"><span class="delimiter">&quot;</span><span class="content">friendly</span><span class="delimiter">&quot;</span></span>)

        submitBtn
    }

    <span class="directive">private</span> updateVehicle(<span class="directive">final</span> <span class="predefined-type">String</span> eventType, <span class="directive">final</span> eventValue) {
        <span class="keyword">switch</span> (eventType) {
            <span class="keyword">case</span> <span class="string"><span class="delimiter">'</span><span class="content">NAME</span><span class="delimiter">'</span></span>:
                <span class="keyword">if</span> ( eventValue <span class="keyword">instanceof</span> <span class="predefined-type">String</span> ) {
                    <span class="local-variable">this</span>.vehicle.name = eventValue <span class="keyword">as</span> <span class="predefined-type">String</span>
                }
                <span class="keyword">break</span>
            <span class="keyword">case</span> <span class="string"><span class="delimiter">'</span><span class="content">MAKE</span><span class="delimiter">'</span></span>:
                <span class="keyword">if</span> ( eventValue <span class="keyword">instanceof</span> Optional&lt;Make&gt; ) {
                    <span class="local-variable">this</span>.vehicle.make = (eventValue <span class="keyword">as</span> Optional&lt;Make&gt;).get()
                }
                <span class="keyword">break</span>
            <span class="keyword">case</span> <span class="string"><span class="delimiter">'</span><span class="content">MODEL</span><span class="delimiter">'</span></span>:
                <span class="keyword">if</span> ( eventValue <span class="keyword">instanceof</span> Optional&lt;Model&gt; ) {
                    <span class="local-variable">this</span>.vehicle.model = (eventValue <span class="keyword">as</span> Optional&lt;Model&gt;).get()
                }
                <span class="keyword">break</span>
            <span class="keyword">case</span> <span class="string"><span class="delimiter">'</span><span class="content">DRIVER</span><span class="delimiter">'</span></span>:
                <span class="keyword">if</span> ( eventValue <span class="keyword">instanceof</span> Optional&lt;<span class="predefined-type">Driver</span>&gt; ) {
                    <span class="local-variable">this</span>.vehicle.driver = (eventValue <span class="keyword">as</span> Optional&lt;<span class="predefined-type">Driver</span>&gt;).get()
                }
                <span class="keyword">break</span>
            <span class="keyword">default</span>:
                log.error <span class="string"><span class="delimiter">'</span><span class="content">updateVehicle invoked with wrong eventType: {}</span><span class="delimiter">'</span></span>, eventType
        }
    }

    <span class="directive">private</span> submit() {
        vehicleService.save(<span class="local-variable">this</span>.vehicle)
        <span class="comment">// tag::navigateTo[]</span>
        getUI().getNavigator().navigateTo(VIEW_NAME)
        <span class="comment">// end::navigateTo[]</span>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Add <code>@SpringView</code> annotation and set the name so that your view can be found.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The view should extend the layout style that is desired</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Set the actual view name</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Services will not be injected automatically into Vaadin Views. You need to use <code>@Autowired</code> annotation in order to get dependency injection to work properly.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Tells the view <code>init()</code> to execute after the main UI <code>init()</code></td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Loads Vehicles and its associations eagerly.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The usage of eager loading in the <code>vehicleService.listAll(false)</code> warrants further explanation.</p>
</div>
<div class="paragraph">
<p>When a Vaadin component calls a Grails service, once the service method completes, the Hibernate session is closed which means that any associations not loaded by the query could lead to a <code>LazyInitializationException</code> due to the closed session.</p>
</div>
<div class="paragraph">
<p>It is therefore critical that your queries always return the data that is required to render the view. This typically leads to better performing queries anyway and will in fact help you design a better performing application.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Grails auto dependency injection is not able to detect services in Vaadin,
thus we require using the more traditional Spring annotation @Autowired in order
to get dependency injection to work properly.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Our view is trying to mimic the layout of much of modern web design by making use of "Rows"
in our case we have 3 rows, a header, data collection, and data display (grid). As we develop
a pattern start to emerge in Vaadin for views.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create layout</p>
</li>
<li>
<p>Create UI component</p>
</li>
<li>
<p>Add UI component to layout</p>
</li>
<li>
<p>Add layout to view</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When adding layout to the view you can just use <code>addComponent()</code> as it is aware that it is
adding to itself, unlike the top level UI where <code>root.addComponent()</code> is required.</p>
</div>
<div class="paragraph">
<p>To keep a clean file continue building each UI component as its own private method.</p>
</div>
<div class="paragraph">
<p>Once we have built our UI components now we need to be able to interact with them. To do this
we add listeners to our components making use of groovy closures to specify what would happen
when an event occurs. In our case we are <code>updateVehicle()</code> which we then <code>submit()</code></p>
</div>
<div class="listingblock">
<div class="title">/grails-app/vaadin/demo/GarageView.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">vehicleName.addValueChangeListener(<span class="keyword">new</span> UpdateVehicleValueChangeListener(<span class="string"><span class="delimiter">'</span><span class="content">NAME</span><span class="delimiter">'</span></span>))
vehicleMake.addSelectionListener(<span class="keyword">new</span> UpdateVehicleComboBoxSelectionLister(<span class="string"><span class="delimiter">'</span><span class="content">MAKE</span><span class="delimiter">'</span></span>))
vehicleModel.addSelectionListener(<span class="keyword">new</span> UpdateVehicleComboBoxSelectionLister(<span class="string"><span class="delimiter">'</span><span class="content">MODEL</span><span class="delimiter">'</span></span>))
vehicleDriver.addSelectionListener(<span class="keyword">new</span> UpdateVehicleComboBoxSelectionLister(<span class="string"><span class="delimiter">'</span><span class="content">DRIVER</span><span class="delimiter">'</span></span>))
submitBtn.addClickListener { event -&gt;
    <span class="local-variable">this</span>.submit()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the listeners we build the vehicle object which is then submitted when the button is clicked.
The last line of our submit method reloads our view to refresh the newly updated data.</p>
</div>
<div class="listingblock">
<div class="title">/grails-app/vaadin/demo/GarageView.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">getUI().getNavigator().navigateTo(VIEW_NAME)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that everything is in place return to <a href="#runningTheApp">[runningTheApp]</a> to run your app. If everything is as
it should be you will see the following.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/runningGarageApp.png" alt="runningGarageApp">
</div>
</div>


<h1 id="themingTheApp">5 Theming the Application</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/vaadin-grails/edit/master/src/main/docs/guide/themingTheApp.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Lastly a word on theming in Vaadin. Vaadin themes are located <code>src/main/webapp</code> directory and
are placed inside the <code>VAADIN/themes</code> directory.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<code>VAADIN/themes</code> is a fixed location. If your theme files are not placed here they will not be
available.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If using our app or if you generated your own using the profile, the vaadin profile will create a new theme for you
called vaadin-grails-theme. You can see that we are using this theme in our <code>VaadinGrailsUI.groovy</code></p>
</div>
<div class="listingblock">
<div class="title">/grails-app/vaadin/demo/VaadinGrailsUI.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">private</span> <span class="predefined-type">Panel</span> springViewDisplay <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="paragraph">
<p>Vaadin themes are SASS based and have multiple ways in which they can be compiled. Since Vaadin themes
have more flexibility than standard css,
Vaadin themes require that a `styles.scss exist in the theme folder as it is the glue that pulls
the different parts of the theme together.</p>
</div>
<div class="listingblock">
<div class="title">/src/main/webapp/VAADIN/themes/vaadin-grails-theme/styles.scss</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span class="directive">@import</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">vaadin-grails-theme.scss</span><span class="delimiter">&quot;</span></span>;
<span class="directive">@import</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">addons.scss</span><span class="delimiter">&quot;</span></span>;

// <span class="tag">This</span> <span class="tag">file</span> <span class="tag">prefixes</span> <span class="tag">all</span> <span class="tag">rules</span> <span class="tag">with</span> <span class="tag">the</span> <span class="tag">theme</span> <span class="tag">name</span> <span class="tag">to</span> <span class="tag">avoid</span> <span class="tag">causing</span> <span class="tag">conflicts</span> <span class="tag">with</span> <span class="tag">other</span> <span class="tag">themes</span>.
// <span class="tag">The</span> <span class="tag">actual</span> <span class="tag">styles</span> <span class="tag">should</span> <span class="tag">be</span> <span class="tag">defined</span> <span class="tag">in</span> <span class="tag">vaadin-grails-theme</span><span class="class">.scss</span>

<span class="class">.vaadin-grails-theme</span> {
  <span class="directive">@include</span> <span class="key">addons</span>;
  <span class="directive">@include</span> <span class="key">vaadin-grails-theme</span>;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To add custom styles then we look to add them in <code>vaadin-grails-theme.scss</code></p>
</div>
<div class="listingblock">
<div class="title">/src/main/webapp/VAADIN/themes/vaadin-grails-theme/vaadin-grails-theme.scss</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span class="directive">@import</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">../valo/valo.scss</span><span class="delimiter">&quot;</span></span>;

<span class="directive">@mixin</span> <span class="tag">vaadin-grails-theme</span> {
  <span class="directive">@include</span> <span class="key">valo</span>;

  // <span class="key">Insert</span> <span class="key">your</span> <span class="key">own</span> <span class="key">theme</span> <span class="key">rules</span> <span class="key">here</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Add your rules under <code>Insert your own theme rules here</code>.
For more details on how Vaadin handles theming look <a href="https://vaadin.com/docs/-/part/framework/themes/themes-overview.html">here</a>.
Vaadin gives a good overview of how they handle SASS compilation as well as how to build your
own themes.</p>
</div>


<h1 id="nextSteps">6 Next Steps</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/vaadin-grails/edit/master/src/main/docs/guide/nextSteps.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>There’s plenty of opportunities to expand the scope of this application. Here are a few ideas for improvements you can make on your own:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a modal dialog form to add new <code>Driver</code>, <code>Makes</code> &amp; <code>Models</code> instances. Use Vaadin&#8217;s <a href="https://vaadin.com/docs/-/part/framework/layout/layout-sub-window.html">Sub-Windows</a> to give you a head start.</p>
</li>
<li>
<p>Add support for updates to existing <code>Vehicle</code> instances. A modal dialog might work well for this as well, or perhaps an editable table row</p>
</li>
<li>
<p>Currently <code>Make</code> &amp; <code>Model</code> domain classes are not related to each other. Adding an association between them, will allow us to display Models for the currently selected <code>Make</code> in the dropdowns. You will want to make use of the JavaScript Array.filter method.</p>
</li>
<li>
<p>Currently, views contain direct references to services. Although it&#8217;s completely fine for a demo or a small application, things will tend to get out of hand when our codebase grows. Patterns such as Model-View-Presenter (MVP) may help to keep an organized codebase. You can read more about patterns and Vaadin in <a href="https://vaadin.com/docs/-/part/framework/advanced/advanced-architecture.html">the Book of Vaadin</a></p>
</li>
</ul>
</div>


<h1 id="helpWithGrails">7 Do you need help with Grails?</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/vaadin-grails/edit/master/src/main/docs/guide/helpWithGrails.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<h3 style="color: #333;">OCI sponsored the creation of this Guide. OCI offers several <a href="https://objectcomputing.com/products/grails/consulting-support/">Grails services</a>:</h3>

<img src="../img/oci-grails-services.svg"/>

<h3>Free consultation </h3>

<!-- This is the code that is needed to run the form -->

<!--Copy and paste into the document's head or body.-->

<script type="text/javascript">

    /** This section is only needed once per page if manually copying **/
    if (typeof MauticSDKLoaded == 'undefined') {
        var MauticSDKLoaded = true;
        var head            = document.getElementsByTagName('head')[0];
        var script          = document.createElement('script');
        script.type         = 'text/javascript';
        script.src          = 'https://mautic.objectcomputing.com/media/js/mautic-form.js';
        script.onload       = function() {
            MauticSDK.onLoad();
        };
        head.appendChild(script);
        var MauticDomain = 'https://mautic.objectcomputing.com';
        var MauticLang   = {
            'submittingMessage': "Please wait..."
        }
    }
</script>

<!--Copy and paste into the document's body.-->

<style type="text/css" scoped>
    .mauticform_wrapper { max-width: 600px; margin: 10px auto; }
    .mauticform-innerform {}
    .mauticform-post-success {}
    .mauticform-name { font-weight: bold; font-size: 1.5em; margin-bottom: 3px; }
    .mauticform-description { margin-top: 2px; margin-bottom: 10px; }
    .mauticform-error { margin-bottom: 10px; color: red; }
    .mauticform-message { margin-bottom: 10px;color: green; }
    .mauticform-row { display: block; margin-bottom: 20px; }
    .mauticform-label { font-size: 1.1em; display: block; font-weight: bold; margin-bottom: 5px; }
    .mauticform-row.mauticform-required .mauticform-label:after { color: #e32; content: " *"; display: inline; }
    .mauticform-helpmessage { display: block; font-size: 0.9em; margin-bottom: 3px; }
    .mauticform-errormsg { display: block; color: red; margin-top: 2px; }
    .mauticform-selectbox, .mauticform-input, .mauticform-textarea { width: 100%; padding: 0.5em 0.5em; border: 1px solid #CCC; background: #fff; box-shadow: 0px 0px 0px #fff inset; border-radius: 4px; box-sizing: border-box; }
    .mauticform-checkboxgrp-row {}
    .mauticform-checkboxgrp-label { font-weight: normal; }
    .mauticform-checkboxgrp-checkbox {}
    .mauticform-radiogrp-row {}
    .mauticform-radiogrp-label { font-weight: normal; }
    .mauticform-radiogrp-radio {}
    .mauticform-button-wrapper .mauticform-button.btn-default, .mauticform-pagebreak-wrapper .mauticform-pagebreak.btn-default { font-size: 14px; color: #fff;background-color: #feb672 ;border-color: #dddddd; padding: 15px 30px;}
    .mauticform-button-wrapper .mauticform-button, .mauticform-pagebreak-wrapper .mauticform-pagebreak { display: inline-block;margin-bottom: 0;font-weight: 600;text-align: center;vertical-align: middle;cursor: pointer;background-image: none;border: 1px solid transparent;white-space: nowrap;padding: 6px 12px;font-size: 13px;line-height: 1.3856;border-radius: none;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}
    .mauticform-button-wrapper .mauticform-button.btn-default[disabled], .mauticform-pagebreak-wrapper .mauticform-pagebreak.btn-default[disabled] { background-color:#feb672; border-color: #dddddd; opacity: 0.75; cursor: not-allowed; font-size: 14px; color: #fff; padding: 15px 30px;}
    .mauticform-pagebreak-wrapper .mauticform-button-wrapper {  display: inline; }
</style>
<div id="mauticform_wrapper_grailsorgconsultationform" class="mauticform_wrapper">
    <form autocomplete="false" role="form" method="post" action="https://mautic.objectcomputing.com/form/submit?formId=3" id="mauticform_grailsorgconsultationform" data-mautic-form="grailsorgconsultationform">

        <div class="mauticform-innerform">

          <div class="mauticform-page-wrapper mauticform-page-1" data-mautic-form-page="1">

            <div id="mauticform_grailsorgconsultationform_first_name"  data-validate="first_name" data-validation-type="text" class="mauticform-row mauticform-text mauticform-field-1 mauticform-required col-lg-6 col-md-6 col-sm-12 col-xs-12">
                <input id="mauticform_input_grailsorgconsultationform_first_name" name="mauticform[first_name]" value="" placeholder="First Name *" class="mauticform-input" type="text" />
                <span class="mauticform-errormsg" style="display: none;">This is required.</span>
            </div>

            <div id="mauticform_grailsorgconsultationform_last_name"  data-validate="last_name" data-validation-type="text" class="mauticform-row mauticform-text mauticform-field-2 mauticform-required col-lg-6 col-md-6 col-sm-12 col-xs-12">
                <input id="mauticform_input_grailsorgconsultationform_last_name" name="mauticform[last_name]" value="" placeholder="Last Name *" class="mauticform-input" type="text" />
                <span class="mauticform-errormsg" style="display: none;">This is required.</span>
            </div>

            <div id="mauticform_grailsorgconsultationform_email"  data-validate="email" data-validation-type="email" class="mauticform-row mauticform-email mauticform-field-3 mauticform-required col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <input id="mauticform_input_grailsorgconsultationform_email" name="mauticform[email]" value="" placeholder="Email *" class="mauticform-input" type="email" />
                <span class="mauticform-errormsg" style="display: none;">This is required.</span>
            </div>

            <div id="mauticform_grailsorgconsultationform_phone"  class="mauticform-row mauticform-tel mauticform-field-4 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <input id="mauticform_input_grailsorgconsultationform_phone" name="mauticform[phone]" value="" placeholder="Phone" class="mauticform-input" type="tel" />
                <span class="mauticform-errormsg" style="display: none;"></span>
            </div>

            <div id="mauticform_grailsorgconsultationform_company"  class="mauticform-row mauticform-text mauticform-field-5 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <input id="mauticform_input_grailsorgconsultationform_company" name="mauticform[company]" value="" placeholder="Company" class="mauticform-input" type="text" />
                <span class="mauticform-errormsg" style="display: none;"></span>
            </div>

            <div id="mauticform_grailsorgconsultationform_submit"  class="mauticform-row mauticform-button-wrapper mauticform-field-6" style="">
                <button type="submit" name="mauticform[submit]" id="mauticform_input_grailsorgconsultationform_submit" name="mauticform[submit]" value="" class="mauticform-button btn btn-default" value="1" style="border: none; margin-left: 14px;">SUBMIT</button>
            </div>
            </div>
        </div>

        <input type="hidden" name="mauticform[formId]" id="mauticform_grailsorgconsultationform_id" value="3"/>
        <input type="hidden" name="mauticform[return]" id="mauticform_grailsorgconsultationform_return" value=""/>
        <input type="hidden" name="mauticform[formName]" id="mauticform_grailsorgconsultationform_name" value="grailsorgconsultationform"/>
</form>
</div>

<!--The code below is the message that appears when someone hits submit. Feel free to style this how you see fit for Grails.org. All CSS is handled in the above code.-->

<div class="mauticform-error" id="mauticform_grailsorgconsultationform_error"></div>
<div class="mauticform-message" id="mauticform_grailsorgconsultationform_message"></div>

<h3 style="color: #333;">The <a href="https://objectcomputing.com/products/grails/consulting-support/">OCI Grails Team</a>
includes Grails co-founders, <b>Jeff Scott Brown and Graeme Rocher</b>.
Check our <a href="https://objectcomputing.com/training/catalog/grails/">Grails courses</a> and learn from the engineers who developed,
matured and maintain Grails.</h3>

<img src="../img/ocigrailsteam.png" style="max-width: 748px; width: 100%;" alt="Grails OCI Team">

                                        </div>
                                    </td>
                                    <td id="col2">
                                        <div class="local clearfix">
                                            <div class="local-title" style="text-align: right"><a href="https://travis-ci.org/grails-guides/vaadin-grails"><img src="https://travis-ci.org/grails-guides/vaadin-grails.svg?branch=master" /></a></div>            

                                            <div class="local-title">
                                                <a href="https://github.com/grails-guides/vaadin-grails">
                                                    <svg height="35" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="35" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></a> &nbsp;&nbsp;Get the Code
                                                </div>
                                                <div class="menu">
                                                    <div class="input-group">                        
                                                        <button href="#" onclick="document.getElementById('github-url').value='git@github.com:grails-guides/vaadin-grails.git'" class="codeButton">SSH</button>
                                                        <button onclick="document.getElementById('github-url').value='https://github.com/grails-guides/vaadin-grails.git'" class="codeButton">HTTPS</button>
                                                        <button onclick="document.getElementById('github-url').value='https://github.com/grails-guides/vaadin-grails'" class="codeButton">Subversion</button>
                                                    </div>

                                                    <div class="input-group">                    
                                                        <!-- Target -->
                                                        <input id="github-url" value="git@github.com:grails-guides/vaadin-grails.git" type="text" />

                                                        <!-- Trigger -->
                                                        <button class="clipbtn" type="button" data-clipboard-target="#github-url">

                                                            <img width="13" src="../img/clippy.svg" alt="Copy to clipboard">
                                                        </button>       

                                                    </div>
                                                    <div class="input-group">
                                                      <a href="https://github.com/grails-guides/vaadin-grails/archive/master.zip" class="downloadButton">Download ZIP</a>
                                                  </div>
                                              </div>
                                              
                                              <div id="table-of-content">
                                                <h2>Table of Contents</h2>
                                                
                                                <div class="toc-item" style="margin-left:0px"><a href="#gettingStarted"><strong>1</strong><span>Getting Started</span></a></div>
                                                
                                                <div class="toc-item" style="margin-left:10px"><a href="#requirements"><strong>1.1</strong><span>What you will need</span></a></div>
                                                
                                                <div class="toc-item" style="margin-left:10px"><a href="#howto"><strong>1.2</strong><span>How to complete the guide</span></a></div>
                                                
                                                <div class="toc-item" style="margin-left:10px"><a href="#profile"><strong>1.3</strong><span>Vaadin 8 Grails 3 Profile</span></a></div>
                                                
                                                <div class="toc-item" style="margin-left:0px"><a href="#aboutVaadin"><strong>2</strong><span>About Vaadin</span></a></div>
                                                
                                                <div class="toc-item" style="margin-left:0px"><a href="#runningTheApp"><strong>3</strong><span>Running the Application</span></a></div>
                                                
                                                <div class="toc-item" style="margin-left:0px"><a href="#writingTheApp"><strong>4</strong><span>Writing the Application</span></a></div>
                                                
                                                <div class="toc-item" style="margin-left:10px"><a href="#creatingTheDomain"><strong>4.1</strong><span>Creating the domain</span></a></div>
                                                
                                                <div class="toc-item" style="margin-left:10px"><a href="#creatingTestData"><strong>4.2</strong><span>Bootstrap Data</span></a></div>
                                                
                                                <div class="toc-item" style="margin-left:10px"><a href="#creatingTheServices"><strong>4.3</strong><span>Creating the service layer</span></a></div>
                                                
                                                <div class="toc-item" style="margin-left:10px"><a href="#creatingTheControllers"><strong>4.4</strong><span>Creating a controller</span></a></div>
                                                
                                                <div class="toc-item" style="margin-left:10px"><a href="#addingToVaadin"><strong>4.5</strong><span>Vaadin</span></a></div>
                                                
                                                <div class="toc-item" style="margin-left:10px"><a href="#addingView"><strong>4.6</strong><span>Adding your view</span></a></div>
                                                
                                                <div class="toc-item" style="margin-left:0px"><a href="#themingTheApp"><strong>5</strong><span>Theming the Application</span></a></div>
                                                
                                                <div class="toc-item" style="margin-left:0px"><a href="#nextSteps"><strong>6</strong><span>Next Steps</span></a></div>
                                                
                                                <div class="toc-item" style="margin-left:0px"><a href="#helpWithGrails"><strong>7</strong><span>Do you need help with Grails?</span></a></div>
                                                
                            <div style="clear:both" ></div>
                        </div>
                                            
                    </div>
                </td>
            </tr>
        </table>

        <div id="footer">
            Copies of this document may be made for your own use and for distribution to others, provided that you do not charge any fee for such copies and further provided that each copy contains this Copyright Notice, whether distributed in print or electronically. All guides are released with an ASLv2 license for the code, and Creative Commons license for the writing. 
            
        </div>

            <!-- END CONTENT -->
          </div>
        </div>
      </div>
    </div>

<script type="text/javascript">
    new Clipboard('.clipbtn');
</script>
<script type="text/javascript" src="../js/docs.js"></script>
<script type="text/javascript" src="../js/classie.js"></script>        
<script type="text/javascript" src="../js/sidebarEffects.js"></script>
<script type="text/javascript" src="../js/navbar.js"></script> 
<style type="text/css">
    #colset {
        background-color: #f5f5f5;
    }
    .grailsnavbar {
        padding-right: 0;
    }
    #fork-me {
        display: none;
    }
</style>       
    </body>
</html>
